var tt_conf_gl=function(t){function e(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var r={};return e.m=t,e.c=r,e.i=function(t){return t},e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=434)}({106:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=e.ONE_OVER_MAX_COLOR=.00392156862;e.DEFAULT_AMBIENT=[76*n,76*n,76*n,255*n],e.DEFAULT_DIFFUSE=[204*n,204*n,204*n,255*n],e.DEFAULT_SPECULAR=[255*n,255*n,255*n,255*n],e.DEFAULT_EMISSION=[0*n,0*n,0*n,255*n],e.GL_OBJECT_TYPE_SHADER_VERT="gl/x-shader-vertex",e.GL_OBJECT_TYPE_SHADER_FRAG="gl/x-shader-frag",e.GL_OBJECT_TYPE_SHADER_PROGRAM="gl/x-shader-program",e.GL_OBJECT_TYPE_OBJECT_3D="gl/x-object-3d",e.GL_OBJECT_TYPE_MODEL_3D="gl/x-model-3d",e.GL_OBJECT_TYPE_ENTITY_3D="gl/x-entity-3d",e.GL_OBJECT_TYPE_CAMERA="gl/x-camera",e.GL_OBJECT_TYPE_LIGHT="gl/x-light",e.GL_OBJECT_TYPE_MATERIAL="gl/x-material"},311:function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&console.info("GET "+t);var r=new XMLHttpRequest;r.onreadystatechange=function(){4==this.readyState&&200==this.status?e.success(this.responseText):4==this.readyState&&200!=this.status&&e.error&&e.error(this,this.error)},r.ontimeout=function(){e.error&&e.error(this,"Request Timeout")},r.open("GET",t,!0),r.send()}function i(t,e){var r=new Image;r.onload=function(){var t=document.createElement("canvas");t.width=this.naturalWidth,t.height=this.naturalHeight,t.getContext("2d").drawImage(this,0,0);var r=t.toDataURL("image/png");document.removeChild(t),e(r)},r.src=t}Object.defineProperty(e,"__esModule",{value:!0}),e.GLUtils=void 0;var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();e.gl_http_get_string=a,e.gl_image_to_data_uri=i;var u=r(453);e.GLUtils=function(){function t(){n(this,t)}return o(t,null,[{key:"setUniform4f",value:function(t,e,r,n,a,i,o){var s=t.getUniformLocation(e,r);if(-1==s)return void(u.DEBUG_UNIFORM_NOT_FOUND&&console.warning("Uniform not found ",r));t.uniform4f(s,n,a,i,o)}},{key:"setUniform3f",value:function(t,e,r,n,a){var i=gl.getUniformLocation(t,e);if(-1==i)return void(u.DEBUG_UNIFORM_NOT_FOUND&&console.warning("Uniform not found ",e));gl.uniform3f(i,r,n,a)}},{key:"setUniform2f",value:function(t,e,r,n,a){var i=t.getUniformLocation(e,r);if(-1==i)return void(u.DEBUG_UNIFORM_NOT_FOUND&&console.warning("Uniform not found ",r));t.uniform2f(i,n,a)}},{key:"setUniform1f",value:function(t,e,r,n){var a=t.getUniformLocation(e,r);if(-1==a)return void(u.DEBUG_UNIFORM_NOT_FOUND&&console.warning("Uniform not found ",r));t.uniform1f(a,n)}},{key:"setUniform4i",value:function(t,e,r,n,a,i,o){var s=t.getUniformLocation(e,r);if(-1==s)return void(u.DEBUG_UNIFORM_NOT_FOUND&&console.warning("Uniform not found ",r));t.uniform4i(s,n,a,i,o)}},{key:"setUniform3i",value:function(t,e,r,n,a,i){var o=t.getUniformLocation(e,r);if(-1==o)return void(u.DEBUG_UNIFORM_NOT_FOUND&&console.warning("Uniform not found ",r));t.uniform3i(o,n,a,i)}},{key:"setUniform2i",value:function(t,e,r,n,a){var i=t.getUniformLocation(e,r);if(-1==i)return void(u.DEBUG_UNIFORM_NOT_FOUND&&console.warning("Uniform not found ",r));t.uniform2i(i,n,a)}},{key:"setUniform1i",value:function(t,e,r,n){var a=t.getUniformLocation(e,r);if(-1==a)return void(u.DEBUG_UNIFORM_NOT_FOUND&&console.warning("Uniform not found ",r));t.uniform1i(a,n)}},{key:"setUniform4iv",value:function(t,e,r,n){var a=t.getUniformLocation(e,r);if(-1==a)return void(u.DEBUG_UNIFORM_NOT_FOUND&&console.warning("Uniform not found ",r));t.uniform4iv(a,n)}},{key:"setUniform3iv",value:function(t,e,r,n){var a=t.getUniformLocation(e,r);if(-1==a)return void(u.DEBUG_UNIFORM_NOT_FOUND&&console.warning("Uniform not found ",r));t.uniform3iv(a,n)}},{key:"setUniform2iv",value:function(t,e,r,n){var a=t.getUniformLocation(e,r);if(-1==a)return void(u.DEBUG_UNIFORM_NOT_FOUND&&console.warning("Uniform not found ",r));t.uniform2iv(a,n)}},{key:"setUniform1iv",value:function(t,e,r,n){var a=t.getUniformLocation(e,r);if(-1==a)return void(u.DEBUG_UNIFORM_NOT_FOUND&&console.warning("Uniform not found ",r));t.uniform1iv(a,n)}},{key:"setUniform4fv",value:function(t,e,r,n){var a=t.getUniformLocation(e,r);-1!=a&&t.uniform4fv(a,n)}},{key:"setUniform3fv",value:function(t,e,r,n){var a=t.getUniformLocation(e,r);if(-1==a)return void(u.DEBUG_UNIFORM_NOT_FOUND&&console.warning("Uniform not found ",r));t.uniform3fv(a,n)}},{key:"setUniform2fv",value:function(t,e,r,n){var a=t.getUniformLocation(e,r);if(-1==a)return void(u.DEBUG_UNIFORM_NOT_FOUND&&console.warning("Uniform not found ",r));t.uniform2fv(a,n)}},{key:"setUniform1fv",value:function(t,e,r,n){var a=t.getUniformLocation(e,r);if(-1==a)return void(u.DEBUG_UNIFORM_NOT_FOUND&&console.warning("Uniform not found ",r));t.uniform1fv(a,n)}},{key:"setUniformMat4",value:function(t,e,r,n){var a=t.getUniformLocation(e,r);if(-1==a)return void(u.DEBUG_UNIFORM_NOT_FOUND&&console.warning("Uniform not found ",r));t.uniformMatrix4fv(a,!1,n)}},{key:"setUniformMat3",value:function(t,e,r,n){var a=t.getUniformLocation(e,r);if(-1==a)return void(u.DEBUG_UNIFORM_NOT_FOUND&&console.warning("Uniform not found ",r));t.uniformMatrix3fv(a,!1,n)}},{key:"setVertexArrayAttrPointer",value:function(t,e,r,n,a){t.bindBuffer(t.ARRAY_BUFFER,r);var i=t.getAttribLocation(e,n);-1!=i&&(t.vertexAttribPointer(i,a,t.FLOAT,!1,0,0),t.enableVertexAttribArray(i))}},{key:"drawTriangleElementArray",value:function(t,e,r){t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),t.drawElements(t.TRIANGLES,r,t.UNSIGNED_SHORT,0)}},{key:"drawLinesElementArray",value:function(t,e,r){t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),t.drawElements(t.LINES,r,t.UNSIGNED_SHORT,0)}}]),t}()},312:function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.MatrixUtils=e.Matrix4Stack=void 0;var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(433);e.Matrix4Stack=function(){function t(){n(this,t),this._active_matrix=i.mat4.create(),this._stack=new Array,this.identity()}return a(t,[{key:"to_array",value:function(){return i.mat4.clone(this._active_matrix)}},{key:"identity",value:function(){i.mat4.identity(this._active_matrix)}},{key:"multiply",value:function(t){var e=i.mat4.create();i.mat4.multiply(e,this._active_matrix,t),this._active_matrix=e}},{key:"push",value:function(){this._stack.push(i.mat4.clone(this._active_matrix))}},{key:"pop",value:function(){this._active_matrix=this._stack.pop()}}]),t}(),e.MatrixUtils=function(){function t(){n(this,t)}return a(t,null,[{key:"get_persp_proj",value:function(t,e,r,n){var a=i.mat4.create();return i.mat4.perspective(a,t,e,r,n),a}},{key:"get_ortho_proj",value:function(t,e,r,n,a,o){var u=i.mat4.create();return i.mat4.ortho(u,t,e,r,n,a,o),u}},{key:"get_look_at",value:function(t,e,r){var n=i.mat4.create();return i.mat4.lookAt(n,t,e,r),n}},{key:"get_transform",value:function(t,e,r){var n=i.mat4.create();return i.mat4.identity(n),i.mat4.translate(n,n,t),i.mat4.rotate(n,n,e[0]*Math.PI/180,[1,0,0]),i.mat4.rotate(n,n,e[1]*Math.PI/180,[0,1,0]),i.mat4.rotate(n,n,e[2]*Math.PI/180,[0,0,1]),i.mat4.scale(n,n,r),n}},{key:"get_identity",value:function(){var t=i.mat4.create();return i.mat4.identity(t),t}},{key:"createMat4",value:function(){return i.mat4.create()}},{key:"multiply",value:function(t,e){var r=i.mat4.create();return i.mat4.multiply(r,t,e),r}},{key:"multiplyV4",value:function(t,e){var r={getX:function(){return e[0]},getY:function(){return e[1]},getZ:function(){return e[2]},getW:function(){return e[3]}},n=t[0]*r.getX()+t[4]*r.getY()+t[8]*r.getZ()+t[12]*r.getW(),a=t[1]*r.getX()+t[5]*r.getY()+t[9]*r.getZ()+t[13]*r.getW(),o=t[2]*r.getX()+t[6]*r.getY()+t[10]*r.getZ()+t[14]*r.getW(),u=t[3]*r.getX()+t[7]*r.getY()+t[11]*r.getZ()+t[15]*r.getW();return i.vec4.fromValues(n,a,o,u)}},{key:"invert",value:function(t){var e=i.mat4.create();return i.mat4.invert(e,t),e}},{key:"transpose",value:function(t){var e=i.mat4.create();return i.mat4.transpose(e,t),e}},{key:"mat3FromMat4",value:function(t){var e=i.mat3.create();return i.mat3.fromMat4(e,t),e}},{key:"unproject",value:function(e,r,n,a,o,u){var s=t.invert(t.multiply(o,a)),_=(e-u[0])/u[2],l=(r-u[1])/u[3],c=i.vec4.fromValues(2*_-1,2*l-1,2*n-1,1),h=t.multiplyV4(s,c);return 0==h[4]?i.vec3.create():i.vec3.fromValues(h[0]/h[3],h[1]/h[3],h[2]/h[3])}},{key:"ray_intersect_plane",value:function(t,e,r,n){var a=i.vec3.create(),o=i.vec3.dot(e,i.vec3.subtract(a,t,r))/i.vec3.dot(e,n),u=i.vec3.create();i.vec3.scale(u,n,o);var s=i.vec3.create();return i.vec3.add(s,r,u),s}},{key:"is_ray_plane_parallel",value:function(t,e){return 0==i.vec3.dot(t,e)}}]),t}()},322:function(t,e,r){"use strict";function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.SHADER_TEXTURES=e.SHADER_LIGHT_PROPERTIES=e.SHADER_PROPERTIES=e.SHADER_PROPERTY_TEXTURE_SHADOWS_ENABLED=e.SHADER_PROPERTY_TEXTURE_15=e.SHADER_PROPERTY_TEXTURE_14=e.SHADER_PROPERTY_TEXTURE_13=e.SHADER_PROPERTY_TEXTURE_12=e.SHADER_PROPERTY_TEXTURE_11=e.SHADER_PROPERTY_TEXTURE_10=e.SHADER_PROPERTY_TEXTURE_9=e.SHADER_PROPERTY_TEXTURE_8=e.SHADER_PROPERTY_TEXTURE_7=e.SHADER_PROPERTY_TEXTURE_6=e.SHADER_PROPERTY_TEXTURE_5=e.SHADER_PROPERTY_TEXTURE_4=e.SHADER_PROPERTY_TEXTURE_3=e.SHADER_PROPERTY_TEXTURE_2=e.SHADER_PROPERTY_TEXTURE_1=e.SHADER_PROPERTY_TEXTURE_0=e.SHADER_PROPERTY_LIGHTS_ENABLED=e.SHADER_PROPERTY_LIGHT_7=e.SHADER_PROPERTY_LIGHT_6=e.SHADER_PROPERTY_LIGHT_5=e.SHADER_PROPERTY_LIGHT_4=e.SHADER_PROPERTY_LIGHT_3=e.SHADER_PROPERTY_LIGHT_2=e.SHADER_PROPERTY_LIGHT_1=e.SHADER_PROPERTY_LIGHT_0=e.SHADER_PROPERTY_MATERIAL=e.SHADER_PROPERTY_UV_ATTRIBUTE=e.SHADER_PROPERTY_NORMAL_ATTRIBUTE=e.SHADER_PROPERTY_VERTEX_ATTRIBUTE=e.SHADER_PROPERTY_SHADOW_VIEW_MATRIX=e.SHADER_PROPERTY_SHADOW_PROJ_MATRIX=e.SHADER_PROPERTY_NORMAL_MATRIX=e.SHADER_PROPERTY_OBJECT_MATRIX_I=e.SHADER_PROPERTY_OBJECT_MATRIX=e.SHADER_PROPERTY_CAMERA_MATRIX_I=e.SHADER_PROPERTY_CAMERA_MATRIX=e.SHADER_PROPERTY_PROJECTION_MATRIX=e.SHADER_PROPERTY_MODEL_VIEW_MATRIX=void 0;var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=r(311),s=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;i(this,t),this._id=e,this._default_value=r}return o(t,[{key:"get_name",value:function(){return this._id}},{key:"get_default",value:function(){return this._default_value}},{key:"set_value",value:function(t,e,r){arguments.length>3&&void 0!==arguments[3]&&arguments[3]}}]),t}(),_=(function(t){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1,1];return i(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r))}a(e,t),o(e,[{key:"set_value",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1,,1,1],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";3==r.length?u.GLUtils.setUniform4f(t,e,n+this._id,r[0],r[1],r[2],1):u.GLUtils.setUniform4fv(t,e,n+this._id,r)}}])}(s),function(t){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return i(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r))}a(e,t),o(e,[{key:"set_value",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";u.GLUtils.setUniform1f(t,e,n+this._id,r)}}])}(s),function(t){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return i(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r))}return a(e,t),o(e,[{key:"set_value",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";u.GLUtils.setUniformMat4(t,e,n+this._id,r)}}]),e}(s)),l=function(t){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return i(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r))}return a(e,t),o(e,[{key:"set_value",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";u.GLUtils.setUniform4fv(t,e,n+this._id+".ambient",r.ambient),u.GLUtils.setUniform4fv(t,e,n+this._id+".diffuse",r.diffuse),u.GLUtils.setUniform4fv(t,e,n+this._id+".specular",r.specular),u.GLUtils.setUniform4fv(t,e,n+this._id+".emission",r.emission),u.GLUtils.setUniform1f(t,e,n+this._id+".shininess",r.shininess),u.GLUtils.setUniform1f(t,e,n+this._id+".brightness",r.brightness),u.GLUtils.setUniform1f(t,e,n+this._id+".alpha",r.alpha)}}]),e}(s),c=function(t){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return i(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r))}return a(e,t),o(e,[{key:"set_value",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";u.GLUtils.setUniform4fv(t,e,n+this._id+".ambient",r.ambient),u.GLUtils.setUniform4fv(t,e,n+this._id+".diffuse",r.diffuse),u.GLUtils.setUniform4fv(t,e,n+this._id+".specular",r.specular),u.GLUtils.setUniform4fv(t,e,n+this._id+".position",r.position),u.GLUtils.setUniform1i(t,e,n+this._id+".enabled",r.enabled)}}]),e}(s),h=function(t){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return i(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r))}return a(e,t),o(e,[{key:"set_value",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";u.GLUtils.setUniformMat3(t,e,n+this._id,r)}}]),e}(s),f=function(t){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return i(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r))}return a(e,t),o(e,[{key:"set_value",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";u.GLUtils.setUniform1i(t,e,n+this._id,r)}}]),e}(s),d=(function(t){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return i(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r))}a(e,t),o(e,[{key:"set_value",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";u.GLUtils.setUniform4iv(t,e,n+this._id,r)}}])}(s),function(t){function e(t,r){i(this,e);var a=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,null));return a._size=r,a}return a(e,t),o(e,[{key:"set_value",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";u.GLUtils.setVertexArrayAttrPointer(t,e,r,n+this.get_name(),this._size)}}]),e}(s)),v=function(t){function e(t,r){i(this,e);var a=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,0));return a._gl_index=r,a}return a(e,t),o(e,[{key:"set_value",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";r?r.is_loaded()&&(t.activeTexture(t["TEXTURE"+r.index]),t.bindTexture(t.TEXTURE_2D,r.gl_data),u.GLUtils.setUniform1i(t,e,n+this.get_name()+".texture",r.index),u.GLUtils.setUniform1i(t,e,n+this.get_name()+".enabled",r.enabled),u.GLUtils.setUniform1i(t,e,n+this.get_name()+".mode",r.mode),u.GLUtils.setUniform1i(t,e,n+this.get_name()+".weight",r.weight)):u.GLUtils.setUniform1i(t,e,n+this.get_name()+".enabled",!1)}}]),e}(s),p=e.SHADER_PROPERTY_MODEL_VIEW_MATRIX=new _("cg_ModelViewMatrix"),g=e.SHADER_PROPERTY_PROJECTION_MATRIX=new _("cg_ProjectionMatrix"),E=e.SHADER_PROPERTY_CAMERA_MATRIX=new _("cg_CameraMatrix"),m=e.SHADER_PROPERTY_CAMERA_MATRIX_I=new _("cg_Inverse_CameraMatrix"),M=e.SHADER_PROPERTY_OBJECT_MATRIX=new _("cg_ObjectMatrix"),R=e.SHADER_PROPERTY_OBJECT_MATRIX_I=new _("cg_Inverse_ObjectMatrix"),y=e.SHADER_PROPERTY_NORMAL_MATRIX=new h("cg_NormalMatrix"),b=e.SHADER_PROPERTY_SHADOW_PROJ_MATRIX=new _("cg_ShadowProjMatrix"),T=e.SHADER_PROPERTY_SHADOW_VIEW_MATRIX=new _("cg_ShadowViewMatrix"),O=e.SHADER_PROPERTY_VERTEX_ATTRIBUTE=new d("cg_Vertex",3),P=e.SHADER_PROPERTY_NORMAL_ATTRIBUTE=new d("cg_Normals",3),A=e.SHADER_PROPERTY_UV_ATTRIBUTE=new d("cg_TexCoord",2),w=e.SHADER_PROPERTY_MATERIAL=new l("cg_Material"),S=e.SHADER_PROPERTY_LIGHT_0=new c("cg_Light0"),U=e.SHADER_PROPERTY_LIGHT_1=new c("cg_Light1"),x=e.SHADER_PROPERTY_LIGHT_2=new c("cg_Light2"),L=e.SHADER_PROPERTY_LIGHT_3=new c("cg_Light3"),D=e.SHADER_PROPERTY_LIGHT_4=new c("cg_Light4"),I=e.SHADER_PROPERTY_LIGHT_5=new c("cg_Light5"),k=e.SHADER_PROPERTY_LIGHT_6=new c("cg_Light6"),Y=e.SHADER_PROPERTY_LIGHT_7=new c("cg_Light7"),j=e.SHADER_PROPERTY_LIGHTS_ENABLED=new f("cg_Lights_Enabled",0),N=e.SHADER_PROPERTY_TEXTURE_0=new v("cg_Texture0",0),G=e.SHADER_PROPERTY_TEXTURE_1=new v("cg_Texture1",1),H=e.SHADER_PROPERTY_TEXTURE_2=new v("cg_Texture2",2),X=e.SHADER_PROPERTY_TEXTURE_3=new v("cg_Texture3",3),F=e.SHADER_PROPERTY_TEXTURE_4=new v("cg_Texture4",4),B=e.SHADER_PROPERTY_TEXTURE_5=new v("cg_Texture5",5),C=e.SHADER_PROPERTY_TEXTURE_6=new v("cg_Texture6",6),q=e.SHADER_PROPERTY_TEXTURE_7=new v("cg_Texture7",7),V=e.SHADER_PROPERTY_TEXTURE_8=new v("cg_Texture8",8),J=e.SHADER_PROPERTY_TEXTURE_9=new v("cg_Texture9",9),W=e.SHADER_PROPERTY_TEXTURE_10=new v("cg_Texture10",10),Z=e.SHADER_PROPERTY_TEXTURE_11=new v("cg_Texture11",11),z=e.SHADER_PROPERTY_TEXTURE_12=new v("cg_Texture12",12),Q=e.SHADER_PROPERTY_TEXTURE_13=new v("cg_Texture13",13),K=e.SHADER_PROPERTY_TEXTURE_14=new v("cg_Texture14",14),$=e.SHADER_PROPERTY_TEXTURE_15=new v("cg_Texture15",15),tt=e.SHADER_PROPERTY_TEXTURE_SHADOWS_ENABLED=new f("cg_Shadows_Enabled",!1);e.SHADER_PROPERTIES=[p,g,E,m,M,R,y,b,T,j,tt,O,P,A,w,S,U,x,L,D,I,k,Y,N,G,H,X,F,B,C,q,V,J,W,Z,z,Q,K,$],e.SHADER_LIGHT_PROPERTIES=[S,U,x,L,D,I,k,Y],e.SHADER_TEXTURES=[N,G,H,X,F,B,C,q,V,J,W,Z,z,Q,K,$]},330:function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Material=void 0;var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=function t(e,r,n){null===e&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,r);if(void 0===a){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,r,n)}if("value"in a)return a.value;var o=a.get;if(void 0!==o)return o.call(n)},s=r(106),_=r(454),l=r(61);e.Material=function(t){function e(t){n(this,e);var r=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,s.GL_OBJECT_TYPE_MATERIAL));return r._shader_program_id=null,r._textures=new _.TextureDescription,r._shininess=30,r._ambient=null,r._diffuse=null,r._specular=null,r._emission=null,r._brightness=null,r._alpha=null,r}return i(e,t),o(e,[{key:"load_data",value:function(t,e){this._shader_program_id=t.shader_program_id?t.shader_program_id:null,this._shininess=t.shininess?t.shininess:null,this._brightness=t.brightness?t.brightness:null,this._alpha=t.alpha?t.alpha:null,this._ambient=t.ambient?t.ambient:null,this._diffuse=t.diffuse?t.diffuse:null,this._specular=t.specular?t.specular:null,this._emission=t.emission?t.emission:null,this._textures.load_data(t,e),e()}},{key:"create_gl",value:function(t,r){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"create_gl",this).call(this,t,r),this._textures.create_gl(t,r)}},{key:"destroy_gl",value:function(t,r){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy_gl",this).call(this,t,r),this._textures.destroy_gl(t,r)}},{key:"has_required_data",value:function(t){if(this._shader_program_id){var e=t.get_shader_program_by_id(this._shader_program_id);if(e)return e.is_loaded()}return!0}},{key:"override_with",value:function(t){t&&(t._shader_program_id&&(this._shader_program_id=t._shader_program_id),this._textures.override_with(t._textures),t._ambient&&(this._ambient=t._ambient),t._diffuse&&(this._diffuse=t._diffuse),t._specular&&(this._specular=t._specular),t._emission&&(this._emission=t._emission),t._alpha&&(this._alpha=t._alpha),t._brightness&&(this._brightness=t._brightness))}},{key:"shader_program_id",get:function(){return this._shader_program_id}},{key:"textures",get:function(){return this._textures.textures}},{key:"ambient",get:function(){return this._ambient?this._ambient:s.DEFAULT_AMBIENT}},{key:"diffuse",get:function(){return this._diffuse?this._diffuse:s.DEFAULT_DIFFUSE}},{key:"specular",get:function(){return this._specular?this._specular:s.DEFAULT_SPECULAR}},{key:"emission",get:function(){return this._emission?this._emission:s.DEFAULT_EMISSION}},{key:"brightness",get:function(){return null===this._brightness?1:this._brightness}},{key:"alpha",get:function(){return null===this._alpha?1:this._alpha}},{key:"shininess",get:function(){return this._shininess}}]),e}(l.GLObject)},346:function(t,e,r){"use strict";function n(){var t=new I.ARRAY_TYPE(9);return I.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function a(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function i(t){var e=new I.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function o(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function u(t,e,r,n,a,i,o,u,s){var _=new I.ARRAY_TYPE(9);return _[0]=t,_[1]=e,_[2]=r,_[3]=n,_[4]=a,_[5]=i,_[6]=o,_[7]=u,_[8]=s,_}function s(t,e,r,n,a,i,o,u,s,_){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t[4]=i,t[5]=o,t[6]=u,t[7]=s,t[8]=_,t}function _(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function l(t,e){if(t===e){var r=e[1],n=e[2],a=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=a}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function c(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=e[4],u=e[5],s=e[6],_=e[7],l=e[8],c=l*o-u*_,h=-l*i+u*s,f=_*i-o*s,d=r*c+n*h+a*f;return d?(d=1/d,t[0]=c*d,t[1]=(-l*n+a*_)*d,t[2]=(u*n-a*o)*d,t[3]=h*d,t[4]=(l*r-a*s)*d,t[5]=(-u*r+a*i)*d,t[6]=f*d,t[7]=(-_*r+n*s)*d,t[8]=(o*r-n*i)*d,t):null}function h(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=e[4],u=e[5],s=e[6],_=e[7],l=e[8];return t[0]=o*l-u*_,t[1]=a*_-n*l,t[2]=n*u-a*o,t[3]=u*s-i*l,t[4]=r*l-a*s,t[5]=a*i-r*u,t[6]=i*_-o*s,t[7]=n*s-r*_,t[8]=r*o-n*i,t}function f(t){var e=t[0],r=t[1],n=t[2],a=t[3],i=t[4],o=t[5],u=t[6],s=t[7],_=t[8];return e*(_*i-o*s)+r*(-_*a+o*u)+n*(s*a-i*u)}function d(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],u=e[4],s=e[5],_=e[6],l=e[7],c=e[8],h=r[0],f=r[1],d=r[2],v=r[3],p=r[4],g=r[5],E=r[6],m=r[7],M=r[8];return t[0]=h*n+f*o+d*_,t[1]=h*a+f*u+d*l,t[2]=h*i+f*s+d*c,t[3]=v*n+p*o+g*_,t[4]=v*a+p*u+g*l,t[5]=v*i+p*s+g*c,t[6]=E*n+m*o+M*_,t[7]=E*a+m*u+M*l,t[8]=E*i+m*s+M*c,t}function v(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],u=e[4],s=e[5],_=e[6],l=e[7],c=e[8],h=r[0],f=r[1];return t[0]=n,t[1]=a,t[2]=i,t[3]=o,t[4]=u,t[5]=s,t[6]=h*n+f*o+_,t[7]=h*a+f*u+l,t[8]=h*i+f*s+c,t}function p(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],u=e[4],s=e[5],_=e[6],l=e[7],c=e[8],h=Math.sin(r),f=Math.cos(r);return t[0]=f*n+h*o,t[1]=f*a+h*u,t[2]=f*i+h*s,t[3]=f*o-h*n,t[4]=f*u-h*a,t[5]=f*s-h*i,t[6]=_,t[7]=l,t[8]=c,t}function g(t,e,r){var n=r[0],a=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function E(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function m(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function M(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function R(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function y(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=r+r,u=n+n,s=a+a,_=r*o,l=n*o,c=n*u,h=a*o,f=a*u,d=a*s,v=i*o,p=i*u,g=i*s;return t[0]=1-c-d,t[3]=l-g,t[6]=h+p,t[1]=l+g,t[4]=1-_-d,t[7]=f-v,t[2]=h-p,t[5]=f+v,t[8]=1-_-c,t}function b(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=e[4],u=e[5],s=e[6],_=e[7],l=e[8],c=e[9],h=e[10],f=e[11],d=e[12],v=e[13],p=e[14],g=e[15],E=r*u-n*o,m=r*s-a*o,M=r*_-i*o,R=n*s-a*u,y=n*_-i*u,b=a*_-i*s,T=l*v-c*d,O=l*p-h*d,P=l*g-f*d,A=c*p-h*v,w=c*g-f*v,S=h*g-f*p,U=E*S-m*w+M*A+R*P-y*O+b*T;return U?(U=1/U,t[0]=(u*S-s*w+_*A)*U,t[1]=(s*P-o*S-_*O)*U,t[2]=(o*w-u*P+_*T)*U,t[3]=(a*w-n*S-i*A)*U,t[4]=(r*S-a*P+i*O)*U,t[5]=(n*P-r*w-i*T)*U,t[6]=(v*b-p*y+g*R)*U,t[7]=(p*M-d*b-g*m)*U,t[8]=(d*y-v*M+g*E)*U,t):null}function T(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function O(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function P(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))}function A(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t}function w(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t}function S(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t}function U(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t}function x(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function L(t,e){var r=t[0],n=t[1],a=t[2],i=t[3],o=t[4],u=t[5],s=t[6],_=t[7],l=t[8],c=e[0],h=e[1],f=e[2],d=e[3],v=e[4],p=e[5],g=e[6],E=e[7],m=e[8];return Math.abs(r-c)<=I.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(n-h)<=I.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(a-f)<=I.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(i-d)<=I.EPSILON*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(o-v)<=I.EPSILON*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(u-p)<=I.EPSILON*Math.max(1,Math.abs(u),Math.abs(p))&&Math.abs(s-g)<=I.EPSILON*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(_-E)<=I.EPSILON*Math.max(1,Math.abs(_),Math.abs(E))&&Math.abs(l-m)<=I.EPSILON*Math.max(1,Math.abs(l),Math.abs(m))}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=n,e.fromMat4=a,e.clone=i,e.copy=o,e.fromValues=u,e.set=s,e.identity=_,e.transpose=l,e.invert=c,e.adjoint=h,e.determinant=f,e.multiply=d,e.translate=v,e.rotate=p,e.scale=g,e.fromTranslation=E,e.fromRotation=m,e.fromScaling=M,e.fromMat2d=R,e.fromQuat=y,e.normalFromMat4=b,e.projection=T,e.str=O,e.frob=P,e.add=A,e.subtract=w,e.multiplyScalar=S,e.multiplyScalarAndAdd=U,e.exactEquals=x,e.equals=L;var D=r(56),I=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(D);e.mul=d,e.sub=w},347:function(t,e,r){"use strict";function n(){var t=new Z.ARRAY_TYPE(16);return Z.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function a(t){var e=new Z.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function i(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function o(t,e,r,n,a,i,o,u,s,_,l,c,h,f,d,v){var p=new Z.ARRAY_TYPE(16);return p[0]=t,p[1]=e,p[2]=r,p[3]=n,p[4]=a,p[5]=i,p[6]=o,p[7]=u,p[8]=s,p[9]=_,p[10]=l,p[11]=c,p[12]=h,p[13]=f,p[14]=d,p[15]=v,p}function u(t,e,r,n,a,i,o,u,s,_,l,c,h,f,d,v,p){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t[4]=i,t[5]=o,t[6]=u,t[7]=s,t[8]=_,t[9]=l,t[10]=c,t[11]=h,t[12]=f,t[13]=d,t[14]=v,t[15]=p,t}function s(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function _(t,e){if(t===e){var r=e[1],n=e[2],a=e[3],i=e[6],o=e[7],u=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=i,t[11]=e[14],t[12]=a,t[13]=o,t[14]=u}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function l(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=e[4],u=e[5],s=e[6],_=e[7],l=e[8],c=e[9],h=e[10],f=e[11],d=e[12],v=e[13],p=e[14],g=e[15],E=r*u-n*o,m=r*s-a*o,M=r*_-i*o,R=n*s-a*u,y=n*_-i*u,b=a*_-i*s,T=l*v-c*d,O=l*p-h*d,P=l*g-f*d,A=c*p-h*v,w=c*g-f*v,S=h*g-f*p,U=E*S-m*w+M*A+R*P-y*O+b*T;return U?(U=1/U,t[0]=(u*S-s*w+_*A)*U,t[1]=(a*w-n*S-i*A)*U,t[2]=(v*b-p*y+g*R)*U,t[3]=(h*y-c*b-f*R)*U,t[4]=(s*P-o*S-_*O)*U,t[5]=(r*S-a*P+i*O)*U,t[6]=(p*M-d*b-g*m)*U,t[7]=(l*b-h*M+f*m)*U,t[8]=(o*w-u*P+_*T)*U,t[9]=(n*P-r*w-i*T)*U,t[10]=(d*y-v*M+g*E)*U,t[11]=(c*M-l*y-f*E)*U,t[12]=(u*O-o*A-s*T)*U,t[13]=(r*A-n*O+a*T)*U,t[14]=(v*m-d*R-p*E)*U,t[15]=(l*R-c*m+h*E)*U,t):null}function c(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=e[4],u=e[5],s=e[6],_=e[7],l=e[8],c=e[9],h=e[10],f=e[11],d=e[12],v=e[13],p=e[14],g=e[15];return t[0]=u*(h*g-f*p)-c*(s*g-_*p)+v*(s*f-_*h),t[1]=-(n*(h*g-f*p)-c*(a*g-i*p)+v*(a*f-i*h)),t[2]=n*(s*g-_*p)-u*(a*g-i*p)+v*(a*_-i*s),t[3]=-(n*(s*f-_*h)-u*(a*f-i*h)+c*(a*_-i*s)),t[4]=-(o*(h*g-f*p)-l*(s*g-_*p)+d*(s*f-_*h)),t[5]=r*(h*g-f*p)-l*(a*g-i*p)+d*(a*f-i*h),t[6]=-(r*(s*g-_*p)-o*(a*g-i*p)+d*(a*_-i*s)),t[7]=r*(s*f-_*h)-o*(a*f-i*h)+l*(a*_-i*s),t[8]=o*(c*g-f*v)-l*(u*g-_*v)+d*(u*f-_*c),t[9]=-(r*(c*g-f*v)-l*(n*g-i*v)+d*(n*f-i*c)),t[10]=r*(u*g-_*v)-o*(n*g-i*v)+d*(n*_-i*u),t[11]=-(r*(u*f-_*c)-o*(n*f-i*c)+l*(n*_-i*u)),t[12]=-(o*(c*p-h*v)-l*(u*p-s*v)+d*(u*h-s*c)),t[13]=r*(c*p-h*v)-l*(n*p-a*v)+d*(n*h-a*c),t[14]=-(r*(u*p-s*v)-o*(n*p-a*v)+d*(n*s-a*u)),t[15]=r*(u*h-s*c)-o*(n*h-a*c)+l*(n*s-a*u),t}function h(t){var e=t[0],r=t[1],n=t[2],a=t[3],i=t[4],o=t[5],u=t[6],s=t[7],_=t[8],l=t[9],c=t[10],h=t[11],f=t[12],d=t[13],v=t[14],p=t[15];return(e*o-r*i)*(c*p-h*v)-(e*u-n*i)*(l*p-h*d)+(e*s-a*i)*(l*v-c*d)+(r*u-n*o)*(_*p-h*f)-(r*s-a*o)*(_*v-c*f)+(n*s-a*u)*(_*d-l*f)}function f(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],u=e[4],s=e[5],_=e[6],l=e[7],c=e[8],h=e[9],f=e[10],d=e[11],v=e[12],p=e[13],g=e[14],E=e[15],m=r[0],M=r[1],R=r[2],y=r[3];return t[0]=m*n+M*u+R*c+y*v,t[1]=m*a+M*s+R*h+y*p,t[2]=m*i+M*_+R*f+y*g,t[3]=m*o+M*l+R*d+y*E,m=r[4],M=r[5],R=r[6],y=r[7],t[4]=m*n+M*u+R*c+y*v,t[5]=m*a+M*s+R*h+y*p,t[6]=m*i+M*_+R*f+y*g,t[7]=m*o+M*l+R*d+y*E,m=r[8],M=r[9],R=r[10],y=r[11],t[8]=m*n+M*u+R*c+y*v,t[9]=m*a+M*s+R*h+y*p,t[10]=m*i+M*_+R*f+y*g,t[11]=m*o+M*l+R*d+y*E,m=r[12],M=r[13],R=r[14],y=r[15],t[12]=m*n+M*u+R*c+y*v,t[13]=m*a+M*s+R*h+y*p,t[14]=m*i+M*_+R*f+y*g,t[15]=m*o+M*l+R*d+y*E,t}function d(t,e,r){var n=r[0],a=r[1],i=r[2],o=void 0,u=void 0,s=void 0,_=void 0,l=void 0,c=void 0,h=void 0,f=void 0,d=void 0,v=void 0,p=void 0,g=void 0;return e===t?(t[12]=e[0]*n+e[4]*a+e[8]*i+e[12],t[13]=e[1]*n+e[5]*a+e[9]*i+e[13],t[14]=e[2]*n+e[6]*a+e[10]*i+e[14],t[15]=e[3]*n+e[7]*a+e[11]*i+e[15]):(o=e[0],u=e[1],s=e[2],_=e[3],l=e[4],c=e[5],h=e[6],f=e[7],d=e[8],v=e[9],p=e[10],g=e[11],t[0]=o,t[1]=u,t[2]=s,t[3]=_,t[4]=l,t[5]=c,t[6]=h,t[7]=f,t[8]=d,t[9]=v,t[10]=p,t[11]=g,t[12]=o*n+l*a+d*i+e[12],t[13]=u*n+c*a+v*i+e[13],t[14]=s*n+h*a+p*i+e[14],t[15]=_*n+f*a+g*i+e[15]),t}function v(t,e,r){var n=r[0],a=r[1],i=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function p(t,e,r,n){var a=n[0],i=n[1],o=n[2],u=Math.sqrt(a*a+i*i+o*o),s=void 0,_=void 0,l=void 0,c=void 0,h=void 0,f=void 0,d=void 0,v=void 0,p=void 0,g=void 0,E=void 0,m=void 0,M=void 0,R=void 0,y=void 0,b=void 0,T=void 0,O=void 0,P=void 0,A=void 0,w=void 0,S=void 0,U=void 0,x=void 0;return u<Z.EPSILON?null:(u=1/u,a*=u,i*=u,o*=u,s=Math.sin(r),_=Math.cos(r),l=1-_,c=e[0],h=e[1],f=e[2],d=e[3],v=e[4],p=e[5],g=e[6],E=e[7],m=e[8],M=e[9],R=e[10],y=e[11],b=a*a*l+_,T=i*a*l+o*s,O=o*a*l-i*s,P=a*i*l-o*s,A=i*i*l+_,w=o*i*l+a*s,S=a*o*l+i*s,U=i*o*l-a*s,x=o*o*l+_,t[0]=c*b+v*T+m*O,t[1]=h*b+p*T+M*O,t[2]=f*b+g*T+R*O,t[3]=d*b+E*T+y*O,t[4]=c*P+v*A+m*w,t[5]=h*P+p*A+M*w,t[6]=f*P+g*A+R*w,t[7]=d*P+E*A+y*w,t[8]=c*S+v*U+m*x,t[9]=h*S+p*U+M*x,t[10]=f*S+g*U+R*x,t[11]=d*S+E*U+y*x,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function g(t,e,r){var n=Math.sin(r),a=Math.cos(r),i=e[4],o=e[5],u=e[6],s=e[7],_=e[8],l=e[9],c=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*a+_*n,t[5]=o*a+l*n,t[6]=u*a+c*n,t[7]=s*a+h*n,t[8]=_*a-i*n,t[9]=l*a-o*n,t[10]=c*a-u*n,t[11]=h*a-s*n,t}function E(t,e,r){var n=Math.sin(r),a=Math.cos(r),i=e[0],o=e[1],u=e[2],s=e[3],_=e[8],l=e[9],c=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*a-_*n,t[1]=o*a-l*n,t[2]=u*a-c*n,t[3]=s*a-h*n,t[8]=i*n+_*a,t[9]=o*n+l*a,t[10]=u*n+c*a,t[11]=s*n+h*a,t}function m(t,e,r){var n=Math.sin(r),a=Math.cos(r),i=e[0],o=e[1],u=e[2],s=e[3],_=e[4],l=e[5],c=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*a+_*n,t[1]=o*a+l*n,t[2]=u*a+c*n,t[3]=s*a+h*n,t[4]=_*a-i*n,t[5]=l*a-o*n,t[6]=c*a-u*n,t[7]=h*a-s*n,t}function M(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function R(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function y(t,e,r){var n=r[0],a=r[1],i=r[2],o=Math.sqrt(n*n+a*a+i*i),u=void 0,s=void 0,_=void 0;return o<Z.EPSILON?null:(o=1/o,n*=o,a*=o,i*=o,u=Math.sin(e),s=Math.cos(e),_=1-s,t[0]=n*n*_+s,t[1]=a*n*_+i*u,t[2]=i*n*_-a*u,t[3]=0,t[4]=n*a*_-i*u,t[5]=a*a*_+s,t[6]=i*a*_+n*u,t[7]=0,t[8]=n*i*_+a*u,t[9]=a*i*_-n*u,t[10]=i*i*_+s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function b(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function T(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function O(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function P(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],u=n+n,s=a+a,_=i+i,l=n*u,c=n*s,h=n*_,f=a*s,d=a*_,v=i*_,p=o*u,g=o*s,E=o*_;return t[0]=1-(f+v),t[1]=c+E,t[2]=h-g,t[3]=0,t[4]=c-E,t[5]=1-(l+v),t[6]=d+p,t[7]=0,t[8]=h+g,t[9]=d-p,t[10]=1-(l+f),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function A(t,e){var r=new Z.ARRAY_TYPE(3),n=-e[0],a=-e[1],i=-e[2],o=e[3],u=e[4],s=e[5],_=e[6],l=e[7],c=n*n+a*a+i*i+o*o;return c>0?(r[0]=2*(u*o+l*n+s*i-_*a)/c,r[1]=2*(s*o+l*a+_*n-u*i)/c,r[2]=2*(_*o+l*i+u*a-s*n)/c):(r[0]=2*(u*o+l*n+s*i-_*a),r[1]=2*(s*o+l*a+_*n-u*i),r[2]=2*(_*o+l*i+u*a-s*n)),P(t,e,r),t}function w(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function S(t,e){var r=e[0],n=e[1],a=e[2],i=e[4],o=e[5],u=e[6],s=e[8],_=e[9],l=e[10];return t[0]=Math.sqrt(r*r+n*n+a*a),t[1]=Math.sqrt(i*i+o*o+u*u),t[2]=Math.sqrt(s*s+_*_+l*l),t}function U(t,e){var r=e[0]+e[5]+e[10],n=0;return r>0?(n=2*Math.sqrt(r+1),t[3]=.25*n,t[0]=(e[6]-e[9])/n,t[1]=(e[8]-e[2])/n,t[2]=(e[1]-e[4])/n):e[0]>e[5]&&e[0]>e[10]?(n=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/n,t[0]=.25*n,t[1]=(e[1]+e[4])/n,t[2]=(e[8]+e[2])/n):e[5]>e[10]?(n=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/n,t[0]=(e[1]+e[4])/n,t[1]=.25*n,t[2]=(e[6]+e[9])/n):(n=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/n,t[0]=(e[8]+e[2])/n,t[1]=(e[6]+e[9])/n,t[2]=.25*n),t}function x(t,e,r,n){var a=e[0],i=e[1],o=e[2],u=e[3],s=a+a,_=i+i,l=o+o,c=a*s,h=a*_,f=a*l,d=i*_,v=i*l,p=o*l,g=u*s,E=u*_,m=u*l,M=n[0],R=n[1],y=n[2];return t[0]=(1-(d+p))*M,t[1]=(h+m)*M,t[2]=(f-E)*M,t[3]=0,t[4]=(h-m)*R,t[5]=(1-(c+p))*R,t[6]=(v+g)*R,t[7]=0,t[8]=(f+E)*y,t[9]=(v-g)*y,t[10]=(1-(c+d))*y,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function L(t,e,r,n,a){var i=e[0],o=e[1],u=e[2],s=e[3],_=i+i,l=o+o,c=u+u,h=i*_,f=i*l,d=i*c,v=o*l,p=o*c,g=u*c,E=s*_,m=s*l,M=s*c,R=n[0],y=n[1],b=n[2],T=a[0],O=a[1],P=a[2],A=(1-(v+g))*R,w=(f+M)*R,S=(d-m)*R,U=(f-M)*y,x=(1-(h+g))*y,L=(p+E)*y,D=(d+m)*b,I=(p-E)*b,k=(1-(h+v))*b;return t[0]=A,t[1]=w,t[2]=S,t[3]=0,t[4]=U,t[5]=x,t[6]=L,t[7]=0,t[8]=D,t[9]=I,t[10]=k,t[11]=0,t[12]=r[0]+T-(A*T+U*O+D*P),t[13]=r[1]+O-(w*T+x*O+I*P),t[14]=r[2]+P-(S*T+L*O+k*P),t[15]=1,t}function D(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=r+r,u=n+n,s=a+a,_=r*o,l=n*o,c=n*u,h=a*o,f=a*u,d=a*s,v=i*o,p=i*u,g=i*s;return t[0]=1-c-d,t[1]=l+g,t[2]=h-p,t[3]=0,t[4]=l-g,t[5]=1-_-d,t[6]=f+v,t[7]=0,t[8]=h+p,t[9]=f-v,t[10]=1-_-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function I(t,e,r,n,a,i,o){var u=1/(r-e),s=1/(a-n),_=1/(i-o);return t[0]=2*i*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*i*s,t[6]=0,t[7]=0,t[8]=(r+e)*u,t[9]=(a+n)*s,t[10]=(o+i)*_,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*i*2*_,t[15]=0,t}function k(t,e,r,n,a){var i=1/Math.tan(e/2),o=void 0;return t[0]=i/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=a&&a!==1/0?(o=1/(n-a),t[10]=(a+n)*o,t[14]=2*a*n*o):(t[10]=-1,t[14]=-2*n),t}function Y(t,e,r,n){var a=Math.tan(e.upDegrees*Math.PI/180),i=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),u=Math.tan(e.rightDegrees*Math.PI/180),s=2/(o+u),_=2/(a+i);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=_,t[6]=0,t[7]=0,t[8]=-(o-u)*s*.5,t[9]=(a-i)*_*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t}function j(t,e,r,n,a,i,o){var u=1/(e-r),s=1/(n-a),_=1/(i-o);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*_,t[11]=0,t[12]=(e+r)*u,t[13]=(a+n)*s,t[14]=(o+i)*_,t[15]=1,t}function N(t,e,r,n){var a=void 0,i=void 0,o=void 0,u=void 0,_=void 0,l=void 0,c=void 0,h=void 0,f=void 0,d=void 0,v=e[0],p=e[1],g=e[2],E=n[0],m=n[1],M=n[2],R=r[0],y=r[1],b=r[2];return Math.abs(v-R)<Z.EPSILON&&Math.abs(p-y)<Z.EPSILON&&Math.abs(g-b)<Z.EPSILON?s(t):(c=v-R,h=p-y,f=g-b,d=1/Math.sqrt(c*c+h*h+f*f),c*=d,h*=d,f*=d,a=m*f-M*h,i=M*c-E*f,o=E*h-m*c,d=Math.sqrt(a*a+i*i+o*o),d?(d=1/d,a*=d,i*=d,o*=d):(a=0,i=0,o=0),u=h*o-f*i,_=f*a-c*o,l=c*i-h*a,d=Math.sqrt(u*u+_*_+l*l),d?(d=1/d,u*=d,_*=d,l*=d):(u=0,_=0,l=0),t[0]=a,t[1]=u,t[2]=c,t[3]=0,t[4]=i,t[5]=_,t[6]=h,t[7]=0,t[8]=o,t[9]=l,t[10]=f,t[11]=0,t[12]=-(a*v+i*p+o*g),t[13]=-(u*v+_*p+l*g),t[14]=-(c*v+h*p+f*g),t[15]=1,t)}function G(t,e,r,n){var a=e[0],i=e[1],o=e[2],u=n[0],s=n[1],_=n[2],l=a-r[0],c=i-r[1],h=o-r[2],f=l*l+c*c+h*h;f>0&&(f=1/Math.sqrt(f),l*=f,c*=f,h*=f);var d=s*h-_*c,v=_*l-u*h,p=u*c-s*l;return f=d*d+v*v+p*p,f>0&&(f=1/Math.sqrt(f),d*=f,v*=f,p*=f),t[0]=d,t[1]=v,t[2]=p,t[3]=0,t[4]=c*p-h*v,t[5]=h*d-l*p,t[6]=l*v-c*d,t[7]=0,t[8]=l,t[9]=c,t[10]=h,t[11]=0,t[12]=a,t[13]=i,t[14]=o,t[15]=1,t}function H(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function X(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))}function F(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t}function B(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}function C(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t}function q(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t[9]=e[9]+r[9]*n,t[10]=e[10]+r[10]*n,t[11]=e[11]+r[11]*n,t[12]=e[12]+r[12]*n,t[13]=e[13]+r[13]*n,t[14]=e[14]+r[14]*n,t[15]=e[15]+r[15]*n,t}function V(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function J(t,e){var r=t[0],n=t[1],a=t[2],i=t[3],o=t[4],u=t[5],s=t[6],_=t[7],l=t[8],c=t[9],h=t[10],f=t[11],d=t[12],v=t[13],p=t[14],g=t[15],E=e[0],m=e[1],M=e[2],R=e[3],y=e[4],b=e[5],T=e[6],O=e[7],P=e[8],A=e[9],w=e[10],S=e[11],U=e[12],x=e[13],L=e[14],D=e[15];return Math.abs(r-E)<=Z.EPSILON*Math.max(1,Math.abs(r),Math.abs(E))&&Math.abs(n-m)<=Z.EPSILON*Math.max(1,Math.abs(n),Math.abs(m))&&Math.abs(a-M)<=Z.EPSILON*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(i-R)<=Z.EPSILON*Math.max(1,Math.abs(i),Math.abs(R))&&Math.abs(o-y)<=Z.EPSILON*Math.max(1,Math.abs(o),Math.abs(y))&&Math.abs(u-b)<=Z.EPSILON*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(s-T)<=Z.EPSILON*Math.max(1,Math.abs(s),Math.abs(T))&&Math.abs(_-O)<=Z.EPSILON*Math.max(1,Math.abs(_),Math.abs(O))&&Math.abs(l-P)<=Z.EPSILON*Math.max(1,Math.abs(l),Math.abs(P))&&Math.abs(c-A)<=Z.EPSILON*Math.max(1,Math.abs(c),Math.abs(A))&&Math.abs(h-w)<=Z.EPSILON*Math.max(1,Math.abs(h),Math.abs(w))&&Math.abs(f-S)<=Z.EPSILON*Math.max(1,Math.abs(f),Math.abs(S))&&Math.abs(d-U)<=Z.EPSILON*Math.max(1,Math.abs(d),Math.abs(U))&&Math.abs(v-x)<=Z.EPSILON*Math.max(1,Math.abs(v),Math.abs(x))&&Math.abs(p-L)<=Z.EPSILON*Math.max(1,Math.abs(p),Math.abs(L))&&Math.abs(g-D)<=Z.EPSILON*Math.max(1,Math.abs(g),Math.abs(D))}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=n,e.clone=a,e.copy=i,e.fromValues=o,e.set=u,e.identity=s,e.transpose=_,e.invert=l,e.adjoint=c,e.determinant=h,e.multiply=f,e.translate=d,e.scale=v,e.rotate=p,e.rotateX=g,e.rotateY=E,e.rotateZ=m,e.fromTranslation=M,e.fromScaling=R,e.fromRotation=y,e.fromXRotation=b,e.fromYRotation=T,e.fromZRotation=O,e.fromRotationTranslation=P,e.fromQuat2=A,e.getTranslation=w,e.getScaling=S,e.getRotation=U,e.fromRotationTranslationScale=x,e.fromRotationTranslationScaleOrigin=L,e.fromQuat=D,e.frustum=I,e.perspective=k,e.perspectiveFromFieldOfView=Y,e.ortho=j,e.lookAt=N,e.targetTo=G,e.str=H,e.frob=X,e.add=F,e.subtract=B,e.multiplyScalar=C,e.multiplyScalarAndAdd=q,e.exactEquals=V,e.equals=J;var W=r(56),Z=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(W);e.mul=f,e.sub=B},348:function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function a(){var t=new R.ARRAY_TYPE(4);return R.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function i(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function o(t,e,r){r*=.5;var n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t}function u(t,e){var r=2*Math.acos(e[3]),n=Math.sin(r/2);return n>R.EPSILON?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),r}function s(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],u=r[0],s=r[1],_=r[2],l=r[3];return t[0]=n*l+o*u+a*_-i*s,t[1]=a*l+o*s+i*u-n*_,t[2]=i*l+o*_+n*s-a*u,t[3]=o*l-n*u-a*s-i*_,t}function _(t,e,r){r*=.5;var n=e[0],a=e[1],i=e[2],o=e[3],u=Math.sin(r),s=Math.cos(r);return t[0]=n*s+o*u,t[1]=a*s+i*u,t[2]=i*s-a*u,t[3]=o*s-n*u,t}function l(t,e,r){r*=.5;var n=e[0],a=e[1],i=e[2],o=e[3],u=Math.sin(r),s=Math.cos(r);return t[0]=n*s-i*u,t[1]=a*s+o*u,t[2]=i*s+n*u,t[3]=o*s-a*u,t}function c(t,e,r){r*=.5;var n=e[0],a=e[1],i=e[2],o=e[3],u=Math.sin(r),s=Math.cos(r);return t[0]=n*s+a*u,t[1]=a*s-n*u,t[2]=i*s+o*u,t[3]=o*s-i*u,t}function h(t,e){var r=e[0],n=e[1],a=e[2];return t[0]=r,t[1]=n,t[2]=a,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-a*a)),t}function f(t,e,r,n){var a=e[0],i=e[1],o=e[2],u=e[3],s=r[0],_=r[1],l=r[2],c=r[3],h=void 0,f=void 0,d=void 0,v=void 0,p=void 0;return f=a*s+i*_+o*l+u*c,f<0&&(f=-f,s=-s,_=-_,l=-l,c=-c),1-f>R.EPSILON?(h=Math.acos(f),d=Math.sin(h),v=Math.sin((1-n)*h)/d,p=Math.sin(n*h)/d):(v=1-n,p=n),t[0]=v*a+p*s,t[1]=v*i+p*_,t[2]=v*o+p*l,t[3]=v*u+p*c,t}function d(t){var e=R.RANDOM(),r=R.RANDOM(),n=R.RANDOM(),a=Math.sqrt(1-e),i=Math.sqrt(e);return t[0]=a*Math.sin(2*Math.PI*r),t[1]=a*Math.cos(2*Math.PI*r),t[2]=i*Math.sin(2*Math.PI*n),t[3]=i*Math.cos(2*Math.PI*n),t}function v(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=r*r+n*n+a*a+i*i,u=o?1/o:0;return t[0]=-r*u,t[1]=-n*u,t[2]=-a*u,t[3]=i*u,t}function p(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function g(t,e){var r=e[0]+e[4]+e[8],n=void 0;if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var a=0;e[4]>e[0]&&(a=1),e[8]>e[3*a+a]&&(a=2);var i=(a+1)%3,o=(a+2)%3;n=Math.sqrt(e[3*a+a]-e[3*i+i]-e[3*o+o]+1),t[a]=.5*n,n=.5/n,t[3]=(e[3*i+o]-e[3*o+i])*n,t[i]=(e[3*i+a]+e[3*a+i])*n,t[o]=(e[3*o+a]+e[3*a+o])*n}return t}function E(t,e,r,n){var a=.5*Math.PI/180;e*=a,r*=a,n*=a;var i=Math.sin(e),o=Math.cos(e),u=Math.sin(r),s=Math.cos(r),_=Math.sin(n),l=Math.cos(n);return t[0]=i*s*l-o*u*_,t[1]=o*u*l+i*s*_,t[2]=o*s*_-i*u*l,t[3]=o*s*l+i*u*_,t}function m(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}Object.defineProperty(e,"__esModule",{value:!0}),e.setAxes=e.sqlerp=e.rotationTo=e.equals=e.exactEquals=e.normalize=e.sqrLen=e.squaredLength=e.len=e.length=e.lerp=e.dot=e.scale=e.mul=e.add=e.set=e.copy=e.fromValues=e.clone=void 0,e.create=a,e.identity=i,e.setAxisAngle=o,e.getAxisAngle=u,e.multiply=s,e.rotateX=_,e.rotateY=l,e.rotateZ=c,e.calculateW=h,e.slerp=f,e.random=d,e.invert=v,e.conjugate=p,e.fromMat3=g,e.fromEuler=E,e.str=m;var M=r(56),R=n(M),y=r(346),b=n(y),T=r(349),O=n(T),P=r(350),A=n(P),w=(e.clone=A.clone,e.fromValues=A.fromValues,e.copy=A.copy,e.set=A.set,e.add=A.add,e.mul=s,e.scale=A.scale,e.dot=A.dot,e.lerp=A.lerp,e.length=A.length),S=(e.len=w,e.squaredLength=A.squaredLength),U=(e.sqrLen=S,e.normalize=A.normalize);e.exactEquals=A.exactEquals,e.equals=A.equals,e.rotationTo=function(){var t=O.create(),e=O.fromValues(1,0,0),r=O.fromValues(0,1,0);return function(n,a,i){var u=O.dot(a,i);return u<-.999999?(O.cross(t,e,a),O.len(t)<1e-6&&O.cross(t,r,a),O.normalize(t,t),o(n,t,Math.PI),n):u>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(O.cross(t,a,i),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+u,U(n,n))}}(),e.sqlerp=function(){var t=a(),e=a();return function(r,n,a,i,o,u){return f(t,n,o,u),f(e,a,i,u),f(r,t,e,2*u*(1-u)),r}}(),e.setAxes=function(){var t=b.create();return function(e,r,n,a){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=a[0],t[4]=a[1],t[7]=a[2],t[2]=-r[0],t[5]=-r[1],t[8]=-r[2],U(e,g(e,t))}}()},349:function(t,e,r){"use strict";function n(){var t=new B.ARRAY_TYPE(3);return B.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function a(t){var e=new B.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function i(t){var e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)}function o(t,e,r){var n=new B.ARRAY_TYPE(3);return n[0]=t,n[1]=e,n[2]=r,n}function u(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function s(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t}function _(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function l(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function c(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function h(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function f(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function d(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function v(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t}function p(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t}function g(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function E(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function m(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t}function M(t,e){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2];return Math.sqrt(r*r+n*n+a*a)}function R(t,e){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2];return r*r+n*n+a*a}function y(t){var e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n}function b(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function T(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function O(t,e){var r=e[0],n=e[1],a=e[2],i=r*r+n*n+a*a;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i),t}function P(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function A(t,e,r){var n=e[0],a=e[1],i=e[2],o=r[0],u=r[1],s=r[2];return t[0]=a*s-i*u,t[1]=i*o-n*s,t[2]=n*u-a*o,t}function w(t,e,r,n){var a=e[0],i=e[1],o=e[2];return t[0]=a+n*(r[0]-a),t[1]=i+n*(r[1]-i),t[2]=o+n*(r[2]-o),t}function S(t,e,r,n,a,i){var o=i*i,u=o*(2*i-3)+1,s=o*(i-2)+i,_=o*(i-1),l=o*(3-2*i);return t[0]=e[0]*u+r[0]*s+n[0]*_+a[0]*l,t[1]=e[1]*u+r[1]*s+n[1]*_+a[1]*l,t[2]=e[2]*u+r[2]*s+n[2]*_+a[2]*l,t}function U(t,e,r,n,a,i){var o=1-i,u=o*o,s=i*i,_=u*o,l=3*i*u,c=3*s*o,h=s*i;return t[0]=e[0]*_+r[0]*l+n[0]*c+a[0]*h,t[1]=e[1]*_+r[1]*l+n[1]*c+a[1]*h,t[2]=e[2]*_+r[2]*l+n[2]*c+a[2]*h,t}function x(t,e){e=e||1;var r=2*B.RANDOM()*Math.PI,n=2*B.RANDOM()-1,a=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*a,t[1]=Math.sin(r)*a,t[2]=n*e,t}function L(t,e,r){var n=e[0],a=e[1],i=e[2],o=r[3]*n+r[7]*a+r[11]*i+r[15];return o=o||1,t[0]=(r[0]*n+r[4]*a+r[8]*i+r[12])/o,t[1]=(r[1]*n+r[5]*a+r[9]*i+r[13])/o,t[2]=(r[2]*n+r[6]*a+r[10]*i+r[14])/o,t}function D(t,e,r){var n=e[0],a=e[1],i=e[2];return t[0]=n*r[0]+a*r[3]+i*r[6],t[1]=n*r[1]+a*r[4]+i*r[7],t[2]=n*r[2]+a*r[5]+i*r[8],t}function I(t,e,r){var n=r[0],a=r[1],i=r[2],o=r[3],u=e[0],s=e[1],_=e[2],l=a*_-i*s,c=i*u-n*_,h=n*s-a*u,f=a*h-i*c,d=i*l-n*h,v=n*c-a*l,p=2*o;return l*=p,c*=p,h*=p,f*=2,d*=2,v*=2,t[0]=u+l+f,t[1]=s+c+d,t[2]=_+h+v,t}function k(t,e,r,n){var a=[],i=[];return a[0]=e[0]-r[0],a[1]=e[1]-r[1],a[2]=e[2]-r[2],i[0]=a[0],i[1]=a[1]*Math.cos(n)-a[2]*Math.sin(n),i[2]=a[1]*Math.sin(n)+a[2]*Math.cos(n),t[0]=i[0]+r[0],t[1]=i[1]+r[1],t[2]=i[2]+r[2],t}function Y(t,e,r,n){var a=[],i=[];return a[0]=e[0]-r[0],a[1]=e[1]-r[1],a[2]=e[2]-r[2],i[0]=a[2]*Math.sin(n)+a[0]*Math.cos(n),i[1]=a[1],i[2]=a[2]*Math.cos(n)-a[0]*Math.sin(n),t[0]=i[0]+r[0],t[1]=i[1]+r[1],t[2]=i[2]+r[2],t}function j(t,e,r,n){var a=[],i=[];return a[0]=e[0]-r[0],a[1]=e[1]-r[1],a[2]=e[2]-r[2],i[0]=a[0]*Math.cos(n)-a[1]*Math.sin(n),i[1]=a[0]*Math.sin(n)+a[1]*Math.cos(n),i[2]=a[2],t[0]=i[0]+r[0],t[1]=i[1]+r[1],t[2]=i[2]+r[2],t}function N(t,e){var r=o(t[0],t[1],t[2]),n=o(e[0],e[1],e[2]);O(r,r),O(n,n);var a=P(r,n);return a>1?0:a<-1?Math.PI:Math.acos(a)}function G(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function H(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function X(t,e){var r=t[0],n=t[1],a=t[2],i=e[0],o=e[1],u=e[2];return Math.abs(r-i)<=B.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-o)<=B.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(a-u)<=B.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.len=e.sqrDist=e.dist=e.div=e.mul=e.sub=void 0,e.create=n,e.clone=a,e.length=i,e.fromValues=o,e.copy=u,e.set=s,e.add=_,e.subtract=l,e.multiply=c,e.divide=h,e.ceil=f,e.floor=d,e.min=v,e.max=p,e.round=g,e.scale=E,e.scaleAndAdd=m,e.distance=M,e.squaredDistance=R,e.squaredLength=y,e.negate=b,e.inverse=T,e.normalize=O,e.dot=P,e.cross=A,e.lerp=w,e.hermite=S,e.bezier=U,e.random=x,e.transformMat4=L,e.transformMat3=D,e.transformQuat=I,e.rotateX=k,e.rotateY=Y,e.rotateZ=j,e.angle=N,e.str=G,e.exactEquals=H,e.equals=X;var F=r(56),B=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(F);e.sub=l,e.mul=c,e.div=h,e.dist=M,e.sqrDist=R,e.len=i,e.sqrLen=y,e.forEach=function(){var t=n();return function(e,r,n,a,i,o){var u=void 0,s=void 0;for(r||(r=3),n||(n=0),s=a?Math.min(a*r+n,e.length):e.length,u=n;u<s;u+=r)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],i(t,t,o),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2];return e}}()},350:function(t,e,r){"use strict";function n(){var t=new k.ARRAY_TYPE(4);return k.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function a(t){var e=new k.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function i(t,e,r,n){var a=new k.ARRAY_TYPE(4);return a[0]=t,a[1]=e,a[2]=r,a[3]=n,a}function o(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function u(t,e,r,n,a){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t}function s(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function _(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function l(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}function c(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}function h(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function f(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function d(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t}function v(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t}function p(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function g(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function E(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}function m(t,e){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2],i=e[3]-t[3];return Math.sqrt(r*r+n*n+a*a+i*i)}function M(t,e){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2],i=e[3]-t[3];return r*r+n*n+a*a+i*i}function R(t){var e=t[0],r=t[1],n=t[2],a=t[3];return Math.sqrt(e*e+r*r+n*n+a*a)}function y(t){var e=t[0],r=t[1],n=t[2],a=t[3];return e*e+r*r+n*n+a*a}function b(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function T(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function O(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=r*r+n*n+a*a+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=r*o,t[1]=n*o,t[2]=a*o,t[3]=i*o),t}function P(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function A(t,e,r,n){var a=e[0],i=e[1],o=e[2],u=e[3];return t[0]=a+n*(r[0]-a),t[1]=i+n*(r[1]-i),t[2]=o+n*(r[2]-o),t[3]=u+n*(r[3]-u),t}function w(t,e){e=e||1;var r,n,a,i,o,u;do{r=2*k.RANDOM()-1,n=2*k.RANDOM()-1,o=r*r+n*n}while(o>=1);do{a=2*k.RANDOM()-1,i=2*k.RANDOM()-1,u=a*a+i*i}while(u>=1);var s=Math.sqrt((1-o)/u);return t[0]=e*r,t[1]=e*n,t[2]=e*a*s,t[3]=e*i*s,t}function S(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3];return t[0]=r[0]*n+r[4]*a+r[8]*i+r[12]*o,t[1]=r[1]*n+r[5]*a+r[9]*i+r[13]*o,t[2]=r[2]*n+r[6]*a+r[10]*i+r[14]*o,t[3]=r[3]*n+r[7]*a+r[11]*i+r[15]*o,t}function U(t,e,r){var n=e[0],a=e[1],i=e[2],o=r[0],u=r[1],s=r[2],_=r[3],l=_*n+u*i-s*a,c=_*a+s*n-o*i,h=_*i+o*a-u*n,f=-o*n-u*a-s*i;return t[0]=l*_+f*-o+c*-s-h*-u,t[1]=c*_+f*-u+h*-o-l*-s,t[2]=h*_+f*-s+l*-u-c*-o,t[3]=e[3],t}function x(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function L(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function D(t,e){var r=t[0],n=t[1],a=t[2],i=t[3],o=e[0],u=e[1],s=e[2],_=e[3];return Math.abs(r-o)<=k.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-u)<=k.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(a-s)<=k.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(i-_)<=k.EPSILON*Math.max(1,Math.abs(i),Math.abs(_))}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.len=e.sqrDist=e.dist=e.div=e.mul=e.sub=void 0,e.create=n,e.clone=a,e.fromValues=i,e.copy=o,e.set=u,e.add=s,e.subtract=_,e.multiply=l,e.divide=c,e.ceil=h,e.floor=f,e.min=d,e.max=v,e.round=p,e.scale=g,e.scaleAndAdd=E,e.distance=m,e.squaredDistance=M,e.length=R,e.squaredLength=y,e.negate=b,e.inverse=T,e.normalize=O,e.dot=P,e.lerp=A,e.random=w,e.transformMat4=S,e.transformQuat=U,e.str=x,e.exactEquals=L,e.equals=D;var I=r(56),k=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(I);e.sub=_,e.mul=l,e.div=c,e.dist=m,e.sqrDist=M,e.len=R,e.sqrLen=y,e.forEach=function(){var t=n();return function(e,r,n,a,i,o){var u=void 0,s=void 0;for(r||(r=4),n||(n=0),s=a?Math.min(a*r+n,e.length):e.length,u=n;u<s;u+=r)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],t[3]=e[u+3],i(t,t,o),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2],e[u+3]=t[3];return e}}()},433:function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.vec4=e.vec3=e.vec2=e.quat2=e.quat=e.mat4=e.mat3=e.mat2d=e.mat2=e.glMatrix=void 0;var a=r(56),i=n(a),o=r(449),u=n(o),s=r(450),_=n(s),l=r(346),c=n(l),h=r(347),f=n(h),d=r(348),v=n(d),p=r(451),g=n(p),E=r(452),m=n(E),M=r(349),R=n(M),y=r(350),b=n(y);e.glMatrix=i,e.mat2=u,e.mat2d=_,e.mat3=c,e.mat4=f,e.quat=v,e.quat2=g,e.vec2=m,e.vec3=R,e.vec4=b},434:function(t,e,r){"use strict";function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.gl_http_get_string=e.gl_image_to_data_uri=e.GraphicsContext=e.WavefrontParser=void 0;var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=r(106),s=r(311),_=r(439),l=r(61),c=r(322),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(c),f=r(436),d=r(438),v=r(330),p=r(440),g=r(437),E=r(441),m=r(312),M=function(){function t(){i(this,t)}return o(t,null,[{key:"create",value:function(t,e,r){var n=e.get_by_id(t.id);return n?{gl_object:n,update_only:!0}:r===u.GL_OBJECT_TYPE_SHADER_PROGRAM?{gl_object:new E.ShaderProgram(t.id),update_only:!1}:r===u.GL_OBJECT_TYPE_CAMERA?{gl_object:new f.Camera(t),update_only:!1}:r===u.GL_OBJECT_TYPE_MODEL_3D?{gl_object:new p.Model3D(t.id),update_only:!1}:r===u.GL_OBJECT_TYPE_ENTITY_3D?{gl_object:new g.Entity3d(t.id),update_only:!1}:r===u.GL_OBJECT_TYPE_MATERIAL?{gl_object:new v.Material(t.id),update_only:!1}:{gl_object:null,update_only:!1}}}]),t}(),R=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t),this._height=e.height,this._width=e.width,this._gl=e.gl,this._scene=e.scene,this._camera=e.camera,this._shader_program=e.shader_program,this._matrix_stack=new m.Matrix4Stack}return o(t,[{key:"get_as_params",value:function(){return{gl:this._gl,width:this._width,height:this._height,scene:this._scene,camera:this._camera,shader_program:this._shader_program,matrix_stack:this._matrix_stack}}},{key:"set_scene",value:function(t){this._scene=t}},{key:"set_camera",value:function(t){this._camera=t}},{key:"set_shader_shader_program",value:function(t){this._shader_program=t}}]),t}(),y=function(t){function e(t){i(this,e);var r=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,"gl/x-scene"));return r._shader_programs=new l.GLObjectCollection,r._cameras=new l.GLObjectCollection,r._models=new l.GLObjectCollection,r._entities=new l.GLObjectCollection,r._materials=new l.GLObjectCollection,r._lights=new l.GLObjectCollection,r._lights.push(new d.Light("light_0")),r._lights.push(new d.Light("light_1")),r._lights.push(new d.Light("light_2")),r._lights.push(new d.Light("light_3")),r._lights.push(new d.Light("light_4")),r._lights.push(new d.Light("light_5")),r._lights.push(new d.Light("light_6")),r._lights.push(new d.Light("light_7")),r._lights_enabled=!1,r}return a(e,t),o(e,[{key:"get_shader_program_by_id",value:function(t){return this._shader_programs.get_by_id(t)}},{key:"get_model3d_by_id",value:function(t){return this._models.get_by_id(t)}},{key:"get_material_by_id",value:function(t){return this._materials.get_by_id(t)}},{key:"render",value:function(t){var e=this,r=t.get_as_params(),n=r.gl,a=r.width,i=r.height,o=r.matrix_stack;if(this._create_gl(n),this._shader_programs.all_loaded()){t.set_scene(this);var u=this;this._cameras.forEach(function(r){r.bind(t),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT);var _=r.get_projection_matrix(a,i),l=r.get_orientation_matrix();o.push(),o.multiply(l),e._entities.forEach(function(r){r.forEach_ModelRef(function(a){var i=r.get_transform();o.push(),o.multiply(i),u.consume_Model3D(a.model_id,function(c){var f=r.get_model_transform(a.model_id);o.push(),o.multiply(f);var d=m.MatrixUtils.multiply(i,f),p=m.MatrixUtils.invert(d),g=m.MatrixUtils.transpose(p),E=m.MatrixUtils.mat3FromMat4(g);c.forEach_Object3d(function(r){r.forEach_MaterialGroup(function(a){var i=new v.Material("");if(i.override_with(c.get_material_by_id(a.material_id)),i.override_with(u.get_material_by_id(a.material_id)),i.shader_program_id){var f=u.get_shader_program_by_id(i.shader_program_id);f?f.bind(t):u.bind_default_shader(t)}else u.bind_default_shader(t);var g=t.get_as_params(),m=g.shader_program;m.set_property(t,h.SHADER_PROPERTY_PROJECTION_MATRIX.get_name(),_),m.set_property(t,h.SHADER_PROPERTY_MODEL_VIEW_MATRIX.get_name(),o.to_array()),m.set_property(t,h.SHADER_PROPERTY_CAMERA_MATRIX.get_name(),l),m.set_property(t,h.SHADER_PROPERTY_OBJECT_MATRIX.get_name(),d),m.set_property(t,h.SHADER_PROPERTY_OBJECT_MATRIX_I.get_name(),p),m.set_property(t,h.SHADER_PROPERTY_NORMAL_MATRIX.get_name(),E),m.set_property(t,h.SHADER_PROPERTY_MATERIAL.get_name(),i);var M=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS);i.textures.forEach(function(e,r){r<M?m.set_property(t,h.SHADER_TEXTURES[r].get_name(),e):m.set_property(t,h.SHADER_TEXTURES[r].get_name(),null)}),m.set_property(t,h.SHADER_PROPERTY_LIGHTS_ENABLED.get_name(),e._lights_enabled),e._lights.forEach(function(e,r){m.set_property(t,h.SHADER_LIGHT_PROPERTIES[r].get_name(),e)}),r.bind(t),s.GLUtils.drawTriangleElementArray(n,a.index_buffer,a.num_items)})}),o.pop()}),o.pop()})}),o.pop()})}}},{key:"bind_default_shader",value:function(t){this.get_shader_program_by_id("__default__").bind(t)}},{key:"update_scene",value:function(t,e){this.load_objects_from_config(t,e,function(){},function(){},!0)}},{key:"load_objects_from_config",value:function(t){function e(t){c._create_new_object_from_config(t,c._shader_programs,s,_,u.GL_OBJECT_TYPE_SHADER_PROGRAM,l)}function r(t){c._create_new_object_from_config(t,c._cameras,s,_,u.GL_OBJECT_TYPE_CAMERA,l)}function n(t){c._create_new_object_from_config(t,c._models,s,_,u.GL_OBJECT_TYPE_MODEL_3D,l)}function a(t){c._create_new_object_from_config(t,c._entities,s,_,u.GL_OBJECT_TYPE_ENTITY_3D,l)}function i(t){c._create_new_object_from_config(t,c._materials,s,_,u.GL_OBJECT_TYPE_MATERIAL,l)}var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},_=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(t){console.error(t)},l=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=this,h={id:"__default__",vertex_shader:{url:t.defaultResourcePath+"cg_default_vert.c"},fragment_shader:{url:t.defaultResourcePath+"cg_default_frag.c"}},f={id:"__default__"},d={id:"__default__",url:t.defaultResourcePath+"model_data_sphere.json"};o.shader_programs?0!=o.shader_programs.length||l?o.shader_programs.forEach(e.bind(this)):e(h):l||e(h),o.cameras?0!=o.cameras.length||l?o.cameras.forEach(r.bind(this)):r(f):l||r(f),o.models?0!=o.models.length||l?o.models.forEach(n.bind(this)):n(d):l||n(d),o.entities&&o.entities.forEach(a.bind(this)),o.materials&&o.materials.forEach(i.bind(this)),o.lights&&(this._lights_enabled=!!o.lights.enabled,o.lights.light_0&&this._lights.get_by_id("light_0").load_data(o.lights.light_0,s,_,!0),o.lights.light_1&&this._lights.get_by_id("light_1").load_data(o.lights.light_1,s,_,!0),o.lights.light_2&&this._lights.get_by_id("light_2").load_data(o.lights.light_2,s,_,!0),o.lights.light_3&&this._lights.get_by_id("light_3").load_data(o.lights.light_3,s,_,!0),o.lights.light_4&&this._lights.get_by_id("light_4").load_data(o.lights.light_4,s,_,!0),o.lights.light_5&&this._lights.get_by_id("light_5").load_data(o.lights.light_5,s,_,!0),o.lights.light_6&&this._lights.get_by_id("light_6").load_data(o.lights.light_6,s,_,!0),o.lights.light_7&&this._lights.get_by_id("light_7").load_data(o.lights.light_7,s,_,!0))}},{key:"destroy_gl",value:function(t){this._shader_programs.forEach(function(e){return e.destroyGl(t)}),this._cameras.forEach(function(e){return e.destroyGl(t)}),this._models.forEach(function(e){return e.destroyGl(t)}),this._entities.forEach(function(e){return e.destroyGl(t)}),this._materials.forEach(function(e){return e.destroyGl(t)}),this._lights.forEach(function(e){return e.destroyGl(t)})}},{key:"_get_object_by_id",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=t.filter(function(t){return t.get_id()===e&&(!r||t.is_type(r))});return n.length>0?n[0]:null}},{key:"_create_new_object_from_config",value:function(t,e,r,n,a,i){var o=M.create(t,e,a),u=o.gl_object,s=o.update_only;u?(e.push(u),u.load_data(t,r,n,s||i)):n("Unable to create GLObject from config : "+JSON.stringify(t))}},{key:"_create_gl",value:function(t){function e(e){e.create_gl(t,this)}this._shader_programs.forEach(e.bind(this)),this._cameras.forEach(e.bind(this)),this._models.forEach(e.bind(this)),this._entities.forEach(e.bind(this)),this._materials.forEach(e.bind(this)),this._lights.forEach(e.bind(this))}},{key:"consume_Model3D",value:function(t,e){this._models.consume_id(t,e)}}]),e}(l.GLObject),b=function(){function t(e){i(this,t),this._canvasId=e,this._gl=null,this._width=0,this._height=0,this._scenes=new l.GLObjectCollection,this._graphics_info={},this.initGl(),this.animationTimer=null,this.defaultResourcePath=""}return o(t,[{key:"initGl",value:function(){if(null===this._gl){var t=document.getElementById(this._canvasId);try{this._gl=t.getContext("webgl"),this._gl.clearColor(1,0,0,1),this._gl.enable(this._gl.DEPTH_TEST),this._gl.enable(this._gl.BLEND),this._gl.depthFunc(this._gl.LEQUAL),this._gl.blendFunc(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA),this._width=t.width,this._height=t.height,this._populate_graphics_info(this._gl)}catch(t){console.error(t)}this._gl||alert("Could not initialise WebGL, sorry :-(")}}},{key:"setDefaultResourcePath",value:function(t){this.defaultResourcePath=t}},{key:"_populate_graphics_info",value:function(t){this._graphics_info.MAX_COMBINED_TEXTURE_IMAGE_UNITS=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this._graphics_info.MAX_CUBE_MAP_TEXTURE_SIZE=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),this._graphics_info.MAX_FRAGMENT_UNIFORM_VECTORS=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),this._graphics_info.MAX_RENDERBUFFER_SIZE=t.getParameter(t.MAX_RENDERBUFFER_SIZE),this._graphics_info.MAX_TEXTURE_IMAGE_UNITS=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),this._graphics_info.MAX_TEXTURE_SIZE=t.getParameter(t.MAX_TEXTURE_SIZE),this._graphics_info.MAX_VARYING_VECTORS=t.getParameter(t.MAX_VARYING_VECTORS),this._graphics_info.MAX_VERTEX_ATTRIBS=t.getParameter(t.MAX_VERTEX_ATTRIBS),this._graphics_info.MAX_VERTEX_TEXTURE_IMAGE_UNITS=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),this._graphics_info.MAX_VIEWPORT_DIMS=t.getParameter(t.MAX_VIEWPORT_DIMS)}},{key:"render",value:function(){var t=this;this._gl&&this._scenes.forEach(function(e){var r={gl:t._gl,width:t._width,height:t._height};e.render(new R(r))})}},{key:"loadSceneContent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=t.id,n=null;this._scenes.containsId(r)?n=this._scenes.get_by_id(r):(n=new y(r),this._scenes.push(n)),n.load_objects_from_config(this,t,this.update_frame.bind(this),function(t){return console.log(t)}),this.render(),e&&e()}},{key:"update_scene",value:function(t){var e=t.id,r=null;this._scenes.containsId(e)?r=this._scenes.get_by_id(e):(r=new y(e),this._scenes.push(r)),r.load_objects_from_config(this,t,function(){},function(){},!0)}},{key:"loadSceneFromUrl",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=this;(0,s.gl_http_get_string)(t,{success:function(t){n.loadSceneContent(JSON.parse(t),function(){null!==e&&n.startAnimation(Math.min(e,60)),r&&r()})}})}},{key:"startAnimation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;this.isAnimating()&&(this.animationTimer=setInterval(this.render.bind(this),Math.ceil(1e3/t)))}},{key:"isAnimating",value:function(){return null!==this.animationTimer}},{key:"stopAnimation",value:function(){this.isAnimating()&&(clearInterval(this.animationTimer),this.animationTimer=null)}},{key:"destroy",value:function(){this.destroyGl(),this.stopAnimation()}},{key:"destroyGl",value:function(){var t=this._gl;this._scenes.forEach(function(e){return e.destroyGl(t)}),t.getExtension("WEBGL_lose_context").loseContext()}},{key:"update_frame",value:function(){this.render()}},{key:"max_textures_supported",get:function(){return this._graphics_info.MAX_TEXTURE_IMAGE_UNITS}}]),t}();e.WavefrontParser=_.WavefrontParser,e.GraphicsContext=b,e.gl_image_to_data_uri=s.gl_image_to_data_uri,e.gl_http_get_string=s.gl_http_get_string},436:function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Camera=e.CAMERA_MODE_ORTHO=e.CAMERA_MODE_PERSPECTIVE=void 0;var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=r(106),s=r(61),_=r(312),l=e.CAMERA_MODE_PERSPECTIVE="projection-perspective",c=e.CAMERA_MODE_ORTHO="projection-ortho";e.Camera=function(t){function e(t){n(this,e);var r=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t.id,u.GL_OBJECT_TYPE_CAMERA));return r._position=t.position?t.position:[0,0,1.5],r._background_color=t.background_color?t.background_color:[.5,.5,.5,1],r._look_at=t.look_at?t.look_at:[0,0,0],r._up=t.up?t.up:[0,1,0],r._near_clip=t.near_clip?t.near_clip:.1,r._far_clip=t.far_clip?t.far_clip:100,r._viewport_x=t.viewport_x?t.viewport_x:0,r._viewport_y=t.viewport_y?t.viewport_y:0,r._viewport_width=t.viewport_width?t.viewport_width:1,r._viewport_height=t.viewport_width?t.viewport_width:1,r._mode=t.mode&&t.mode===c?c:l,r._angle=t.angle?t.angle:60,r._left=t.left?t.left:-10,r._right=t.right?t.right:10,r._top=t.top?t.top:10,r._bottom=t.bottom?t.bottom:-10,r}return i(e,t),o(e,[{key:"set_position",value:function(t){return this._position=t,this}},{key:"set_look_at",value:function(t){return this._look_at=t,this}},{key:"set_up",value:function(t){return this._up=t,this}},{key:"set_viewort_x",value:function(t){return this._viewport_x=t,this}},{key:"set_viewort_y",value:function(t){return this._viewport_y=t,this}},{key:"set_viewort_width",value:function(t){return this._viewport_width=t,this}},{key:"set_viewort_height",value:function(t){return this._viewport_height=t,this}},{key:"get_viewport",value:function(t,e){return[t*this._viewport_x,e*this._viewport_y,t*this._viewport_width,e*this._viewport_height]}},{key:"bind",value:function(t){var e=t.get_as_params(),r=e.gl,n=e.width,a=e.height,i=this.get_viewport(n,a);t.set_camera(this),r.clearColor(this._background_color[0],this._background_color[1],this._background_color[2],this._background_color[3]),r.viewport(i[0],i[1],i[2],i[3])}},{key:"get_projection_matrix",value:function(t,e){if(this.is_perspective_mode()){var r=t*this._viewport_width/(e*this._viewport_height),n=this._angle*(Math.PI/180);return _.MatrixUtils.get_persp_proj(n,r,this._near_clip,this._far_clip)}return _.MatrixUtils.get_ortho_proj(this._left,this._right,this._bottom,this._top,this._near_clip,this._far_clip)}},{key:"get_orientation_matrix",value:function(){return _.MatrixUtils.get_look_at(this._position,this._look_at,this._up)}},{key:"is_ortho_mode",value:function(){return this._mode===c}},{key:"is_perspective_mode",value:function(){return this._mode===l}}]),e}(s.GLObject)},437:function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Entity3d=void 0;var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=r(61),s=r(106),_=r(312);e.Entity3d=function(t){function e(t){n(this,e);var r=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,s.GL_OBJECT_TYPE_ENTITY_3D));return r.position=[0,0,0],r.rotation=[0,0,0],r.scale=[1,1,1],r._color=[1,1,1,1],r._alpha=1,r._brightness=1,r.model_refs=[],r}return i(e,t),o(e,[{key:"load_data",value:function(t,e,r,n){var a=this;n?(t.position&&(this.position=t.position),t.rotation&&(this.rotation=t.rotation),t.scale&&(this.scale=t.scale),t.color&&(this._color=t.color),t.alpha&&(this._apha=t.alpha),t.brightness&&(this._brightness=t.brightness),t.model_refs&&a.model_refs.forEach(function(e){e.id&&t.model_refs.forEach(function(t){t.id&&t.id===e.id&&(t.model_id&&(e.model_id=t.model_id),t.position&&(e.position=t.position),t.rotation&&(e.rotation=t.rotation),t.scale&&(e.rotation=t.scale))})})):(this.position=t.position?t.position:[0,0,0],this.rotation=t.rotation?t.rotation:[0,0,0],this.scale=t.scale?t.scale:[1,1,1],this._color=t.color?t.color:[1,1,1,1],this._alpha=t.alpha?t.alpha:1,this._brightness=t.brightness?t.brightness:1,t.model_refs&&t.model_refs.forEach(function(t){var e={id:t.id,model_id:t.model_id,position:t.position?t.position:[0,0,0],rotation:t.rotation?t.rotation:[0,0,0],scale:t.scale?t.scale:[1,1,1]};a.model_refs.push(e)}))}},{key:"has_required_data",value:function(t){return 0==this.model_refs.filter(function(e){var r=t.get_model3d_by_id(e.model_id);return!!r&&!r.is_loaded()}).length}},{key:"forEach_ModelRef",value:function(t){0==this.model_refs.length?[{model_id:"__default__"}].forEach(t):this.model_refs.forEach(t)}},{key:"get_transform",value:function(){return this._get_transform(this)}},{key:"_get_transform",value:function(t){return _.MatrixUtils.get_transform(t.position,t.rotation,t.scale)}},{key:"get_model_transform",value:function(t){var e=this.model_refs.filter(function(e){return e.model_id===t});return 0==e.length?_.MatrixUtils.get_identity():this._get_transform(e[0])}},{key:"color",get:function(){return this._color}},{key:"alpha",get:function(){return this._alpha}},{key:"brightness",get:function(){return this._brightness}}]),e}(u.GLObject)},438:function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Light=void 0;var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=r(106),s=r(61);e.Light=function(t){function e(t){n(this,e);var r=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r._ambient=u.DEFAULT_AMBIENT,r._diffuse=u.DEFAULT_DIFFUSE,r._specular=u.DEFAULT_SPECULAR,r._position=[0,0,0],r._enabled=!1,r}return i(e,t),o(e,[{key:"load_data",value:function(t,e){this._position=t.position?t.position:[0,0,0],this._ambient=t.ambient?t.ambient:u.DEFAULT_AMBIENT,this._diffuse=t.diffuse?t.diffuse:u.DEFAULT_DIFFUSE,this._specular=t.specular?t.specular:u.DEFAULT_SPECULAR,this._enabled=void 0!==t.enabled&&t.enabled,e()}},{key:"has_required_data",value:function(t){return!0}},{key:"is_loaded",value:function(){return!0}},{key:"ambient",get:function(){return this._ambient}},{key:"diffuse",get:function(){return this._diffuse}},{key:"specular",get:function(){return this._specular}},{key:"position",get:function(){return 3==this._position.length?[this._position[0],this._position[1],this._position[2],1]:this._position}},{key:"enabled",get:function(){return this._enabled}}]),e}(s.GLObject)},439:function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();e.WavefrontParser=function(){function t(){n(this,t)}return a(t,[{key:"parseString",value:function(t,e){function r(){return u.model.objects[u.model.objects.length-1]}function n(){return r().material_groups[r().material_groups.length-1]}function a(t){if(!u.model.materials.find(function(e){return e.id===t})){var e={id:t};u.model.materials.push(e)}}function i(t){var e=t||"material_"+u.model.materials.length,n={material_id:e,indexes:[]};a(e),r().material_groups.push(n)}function o(t){var e=t||"obj_"+u.model.objects.length,r={id:e,vertices:[],normals:null,uv:null,material_groups:[]};u.model.objects.push(r),l=[],c=[],h=[]}var u={type:".obj",model:{material_file:"",id:e,objects:[],materials:[]}},s=!0,_=null,l=[],c=[],h=[];return t.split("\n").forEach(function(t){if(t.startsWith("mtllib "))return void(u.model.material_file=t.replace(" ")[1].trim());if(t.startsWith("o "))return o(t.split(" ")[1].trim()),void(s=!1);if(t.startsWith("v "))return s&&"v "!==_&&o(),_="v ",void l.push(t.replace("v ","").trim().split(" ").map(function(t){return parseFloat(t.trim())}));if(t.startsWith("vn "))return _="vn ",void c.push(t.replace("vn ","").trim().split(" ").map(function(t){return parseFloat(t.trim())}));if(t.startsWith("vt "))return _="vt ",void h.push(t.replace("vt ","").trim().split(" ").map(function(t){return parseFloat(t.trim())}));if(t.startsWith("usemtl "))return void i(t.split(" ")[1].trim());if(t.startsWith("f ")){"f "!==_&&i();var e=n(),a=r();return _="f ",void t.replace("f ","").trim().split(" ").map(function(t){return t.trim()}).forEach(function(t){var r=t.split("/").map(function(t,e,r){return t?parseInt(t)-1:parseInt(r[0])-1}),n=r[0],i=r.length>1?r[1]:n,o=r.length>2?r[2]:n;l[n].forEach(function(t){return a.vertices.push(t)}),e.indexes.push(a.vertices.length/3-1),c.length>0&&(null===a.normals&&(a.normals=[]),c[o].forEach(function(t){return a.normals.push(t)})),h.length>0&&(null===a.uv&&(a.uv=[]),h[i].forEach(function(t){return a.uv.push(t)}))})}}),u}}]),t}()},440:function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Model3D=void 0;var o=function t(e,r,n){null===e&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,r);if(void 0===a){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,r,n)}if("value"in a)return a.value;var o=a.get;if(void 0!==o)return o.call(n)},u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=r(322),_=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(s),l=r(330),c=r(61),h=r(106),f=r(311),d=function(t){function e(t){n(this,e);var r=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,h.GL_OBJECT_TYPE_OBJECT_3D));return r._clear(),r}return i(e,t),u(e,[{key:"_clear",value:function(){this.raw_data=null,this.gl_data={vertex_buffer:null,normals:null,uv:null,item_size:3,num_items:0,material_groups:[]}}},{key:"create_gl_internal",value:function(t,e){var r=this;return this.gl_data.vertex_buffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.gl_data.vertex_buffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(this.raw_data.data.vertices),t.STATIC_DRAW),this.raw_data.data.normals&&(this.gl_data.normals=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.gl_data.normals),t.bufferData(t.ARRAY_BUFFER,new Float32Array(this.raw_data.data.normals),t.STATIC_DRAW)),this.raw_data.data.uv&&(this.gl_data.uv=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.gl_data.uv),t.bufferData(t.ARRAY_BUFFER,new Float32Array(this.raw_data.data.uv),t.STATIC_DRAW)),this.raw_data.data.material_groups.forEach(function(e){var n={material_id:e.material_id,index_buffer:t.createBuffer(),item_size:1,num_items:e.indexes.length};t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.index_buffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(e.indexes),t.STATIC_DRAW),r.gl_data.material_groups.push(n)}),0}},{key:"destroy_gl_internal",value:function(t){this.gl_data.vertex_buffer&&t.deleteBuffer(this.gl_data.vertex_buffer),this.gl_data.normals&&t.deleteBuffer(this.gl_data.normals),this.gl_data.uv&&t.deleteBuffer(this.gl_data.uv),this.gl_data.material_groups.forEach(function(e){t.deleteBuffer(e.index_buffer)}),this._clear()}},{key:"bind",value:function(t){if(this.is_loaded()){var e=t.get_as_params(),r=e.shader_program;r.set_property(t,_.SHADER_PROPERTY_VERTEX_ATTRIBUTE.get_name(),this.gl_data.vertex_buffer),this.gl_data.normals&&r.set_property(t,_.SHADER_PROPERTY_NORMAL_ATTRIBUTE.get_name(),this.gl_data.normals),this.gl_data.uv&&r.set_property(t,_.SHADER_PROPERTY_UV_ATTRIBUTE.get_name(),this.gl_data.uv)}}},{key:"forEach_MaterialGroup",value:function(t){this.gl_data.material_groups.forEach(t)}},{key:"load_data",value:function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.raw_data={type:"object",data:t},e()}},{key:"has_required_data",value:function(t){return null!==this.raw_data}}]),e}(c.GLObject);e.Model3D=function(t){function e(t){n(this,e);var r=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,h.GL_OBJECT_TYPE_MODEL_3D));return r._clear(),r}return i(e,t),u(e,[{key:"_clear",value:function(){this.materials=new c.GLObjectCollection,this.objects=new c.GLObjectCollection,this.raw_data=null}},{key:"create_gl",value:function(t,r){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"create_gl",this).call(this,t,r),this.materials.create_gl(t,r),this.objects.create_gl(t,r)}},{key:"create_gl_internal",value:function(t,e){}},{key:"destroy_gl",value:function(t){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy_gl",this).call(this,t),this.objects.destroy_gl(t),this.materials.destroy_gl(t),this._clear()}},{key:"is_loaded",value:function(){return o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"is_loaded",this).call(this)&&this.objects.all_loaded()&&this.materials.all_loaded()}},{key:"load_data",value:function(t,e){if(t.url){if(t.url.endsWith(".json")){var r=function(t){a.set_raw_data(JSON.parse(t),e),e()},n=function(t,e){console.error(t,e)},a=this;return(0,f.gl_http_get_string)(t.url,{success:r,error:n}),!0}return console.error("Model url not supported for file : ",t.url),!1}this.set_raw_data(t,e),e()}},{key:"set_raw_data",value:function(t,e){var r=this;this.raw_data={type:"object",data:t},t.materials.forEach(function(t){var n=new l.Material(t.id);r.materials.push(n),n.load_data(t,e)}),t.objects.forEach(function(t){var n=new d(t.id);r.objects.push(n),n.load_data(t,e)})}},{key:"has_required_data",value:function(t){return null!==this.raw_data&&this.objects.has_required_data(t)&&this.materials.has_required_data(t)}},{key:"forEach_Object3d",value:function(t){this.objects.forEach(t)}},{key:"consume_Material",value:function(t,e){this.materials.consume_id(t,e)}},{key:"get_material_by_id",value:function(t){return this.materials.get_by_id(t)}}]),e}(c.GLObject)},441:function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.ShaderProgram=void 0;var o=function t(e,r,n){null===e&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,r);if(void 0===a){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,r,n)}if("value"in a)return a.value;var o=a.get;if(void 0!==o)return o.call(n)},u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=r(106),_=r(311),l=r(322),c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(l),h=r(61),f="vert_",d="frag_",v=function(t){function e(t,r){n(this,e);var i=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,r));return i.shader_id=0,i.source=null,i}return i(e,t),u(e,[{key:"get_shader_id",value:function(){return this.shader_id}},{key:"create_gl_internal",value:function(t,e){if(this.is_type(s.GL_OBJECT_TYPE_SHADER_FRAG)?this.shader_id=t.createShader(t.FRAGMENT_SHADER):this.is_type(s.GL_OBJECT_TYPE_SHADER_VERT)&&(this.shader_id=t.createShader(t.VERTEX_SHADER)),t.shaderSource(this.shader_id,this.source),t.compileShader(this.shader_id),!t.getShaderParameter(this.shader_id,t.COMPILE_STATUS))return void console.error(t.getShaderInfoLog(this.shader_id))}},{key:"destroy_gl_internal",value:function(t){t.deleteShader(this.shader_id),this.shader_id=null,this.source=null}},{key:"get_source",value:function(){return this.source}},{key:"load_data",value:function(t,e){if(t.url){var r=function(t){this.source=this.replace_source_with_prefix_uniforms(t),e()},n=function(t,e){console.error(t,e)};return(0,_.gl_http_get_string)(t.url,{success:r.bind(this),error:n}),!0}return this.source=this.replace_source_with_prefix_uniforms(t.source),e(),!0}},{key:"replace_source_with_prefix_uniforms",value:function(t){var e=t,r=this.is_type(s.GL_OBJECT_TYPE_SHADER_VERT)?f:d;return c.SHADER_PROPERTIES.forEach(function(t){e.indexOf(-1!=t.get_name())&&(e=e.replace(new RegExp(t.get_name(),"g"),r+t.get_name()))}),e}},{key:"has_required_data",value:function(t){return!!this.source}}]),e}(h.GLObject);e.ShaderProgram=function(t){function e(t){n(this,e);var r=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,s.GL_OBJECT_TYPE_SHADER_PROGRAM));return r.clear(),r}return i(e,t),u(e,[{key:"clear",value:function(t,e){this._vertex_shader=null,this._fragment_shader=null,this.shader_program_id=null,this.properties={}}},{key:"get_shader_program_id",value:function(){return this.shader_program_id}},{key:"bind",value:function(t){if(this.is_loaded()){t.get_as_params().gl.useProgram(this.shader_program_id),t.set_shader_shader_program(this);var e=this,r=this.properties;Object.keys(r).forEach(function(n){var a=r[n],i=a.prop.get_default();null!==i&&e.set_property(t,n,i)})}}},{key:"create_gl_internal",value:function(t,e){var r=this._vertex_shader,n=this._fragment_shader;return this.shader_program_id=t.createProgram(),t.attachShader(this.shader_program_id,r.get_shader_id()),t.attachShader(this.shader_program_id,n.get_shader_id()),t.linkProgram(this.shader_program_id),t.getProgramParameter(this.shader_program_id,t.LINK_STATUS)||alert("Could not initialise shaders"),t.useProgram(this.shader_program_id),this._add_properties_from_source(r.get_source(),f),this._add_properties_from_source(n.get_source(),d),0}},{key:"load_data",value:function(t,e){this._vertex_shader=new v("",s.GL_OBJECT_TYPE_SHADER_VERT),this._vertex_shader.load_data(t.vertex_shader,e),this._fragment_shader=new v("",s.GL_OBJECT_TYPE_SHADER_FRAG),this._fragment_shader.load_data(t.fragment_shader,e),e()}},{key:"create_gl",value:function(t,r){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"create_gl",this).call(this,t,r),this._vertex_shader&&this._vertex_shader.create_gl(t,r),this._fragment_shader&&this._fragment_shader.create_gl(t,r)}},{key:"destroy_gl_internal",value:function(t){this._vertex_shader.destroy_gl(t),this._fragment_shader.destroy_gl(t),t.deleteProgram(this.shader_program_id),this.clear()}},{key:"set_property",value:function(t,e,r){var n=this,a=this.properties[e];if(a){var i=t.get_as_params(),o=i.gl;a.prefixes?a.prefixes.forEach(function(t){return n.set_property_exact_name(a,o,r,t)}):this.set_property_exact_name(a,o,r,"")}}},{key:"set_property_exact_name",value:function(t,e,r,n){t.prop.set_value(e,this.shader_program_id,r,n)}},{key:"has_required_data",value:function(t){return this._vertex_shader&&this._vertex_shader.is_loaded()&&this._fragment_shader&&this._fragment_shader.is_loaded()}},{key:"_get_shader_property",value:function(t){var e=this.properties.filter(function(e){return e.get_name()===t});return e.length>0?e[0]:null}},{key:"_contains_property",value:function(t){return!!this._get_shader_property(t)}},{key:"_add_properties_from_source",value:function(t,e){var r=this;c.SHADER_PROPERTIES.forEach(function(n){var a=e+n.get_name();t.includes(a)&&(r.properties[n.get_name()]?r.properties[n.get_name()].prefixes.push(e):r.properties[n.get_name()]={prefixes:[e],prop:n})})}}]),e}(h.GLObject)},449:function(t,e,r){"use strict";function n(){var t=new w.ARRAY_TYPE(4);return w.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function a(t){var e=new w.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function i(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function o(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function u(t,e,r,n){var a=new w.ARRAY_TYPE(4);return a[0]=t,a[1]=e,a[2]=r,a[3]=n,a}function s(t,e,r,n,a){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t}function _(t,e){if(t===e){var r=e[1];t[1]=e[2],t[2]=r}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function l(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=r*i-a*n;return o?(o=1/o,t[0]=i*o,t[1]=-n*o,t[2]=-a*o,t[3]=r*o,t):null}function c(t,e){var r=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=r,t}function h(t){return t[0]*t[3]-t[2]*t[1]}function f(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],u=r[0],s=r[1],_=r[2],l=r[3];return t[0]=n*u+i*s,t[1]=a*u+o*s,t[2]=n*_+i*l,t[3]=a*_+o*l,t}function d(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],u=Math.sin(r),s=Math.cos(r);return t[0]=n*s+i*u,t[1]=a*s+o*u,t[2]=n*-u+i*s,t[3]=a*-u+o*s,t}function v(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],u=r[0],s=r[1];return t[0]=n*u,t[1]=a*u,t[2]=i*s,t[3]=o*s,t}function p(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t}function g(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function E(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function m(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))}function M(t,e,r,n){return t[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-t[2]*r[1],[t,e,r]}function R(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function y(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function b(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function T(t,e){var r=t[0],n=t[1],a=t[2],i=t[3],o=e[0],u=e[1],s=e[2],_=e[3];return Math.abs(r-o)<=w.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-u)<=w.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(a-s)<=w.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(i-_)<=w.EPSILON*Math.max(1,Math.abs(i),Math.abs(_))}function O(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function P(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=n,e.clone=a,e.copy=i,e.identity=o,e.fromValues=u,e.set=s,e.transpose=_,e.invert=l,e.adjoint=c,e.determinant=h,e.multiply=f,e.rotate=d,e.scale=v,e.fromRotation=p,e.fromScaling=g,e.str=E,e.frob=m,e.LDU=M,e.add=R,e.subtract=y,e.exactEquals=b,e.equals=T,e.multiplyScalar=O,e.multiplyScalarAndAdd=P;var A=r(56),w=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(A);e.mul=f,e.sub=y},450:function(t,e,r){"use strict";function n(){var t=new A.ARRAY_TYPE(6);return A.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function a(t){var e=new A.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function i(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function o(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function u(t,e,r,n,a,i){var o=new A.ARRAY_TYPE(6);return o[0]=t,o[1]=e,o[2]=r,o[3]=n,o[4]=a,o[5]=i,o}function s(t,e,r,n,a,i,o){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t[4]=i,t[5]=o,t}function _(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=e[4],u=e[5],s=r*i-n*a;return s?(s=1/s,t[0]=i*s,t[1]=-n*s,t[2]=-a*s,t[3]=r*s,t[4]=(a*u-i*o)*s,t[5]=(n*o-r*u)*s,t):null}function l(t){return t[0]*t[3]-t[1]*t[2]}function c(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],u=e[4],s=e[5],_=r[0],l=r[1],c=r[2],h=r[3],f=r[4],d=r[5];return t[0]=n*_+i*l,t[1]=a*_+o*l,t[2]=n*c+i*h,t[3]=a*c+o*h,t[4]=n*f+i*d+u,t[5]=a*f+o*d+s,t}function h(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],u=e[4],s=e[5],_=Math.sin(r),l=Math.cos(r);return t[0]=n*l+i*_,t[1]=a*l+o*_,t[2]=n*-_+i*l,t[3]=a*-_+o*l,t[4]=u,t[5]=s,t}function f(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],u=e[4],s=e[5],_=r[0],l=r[1];return t[0]=n*_,t[1]=a*_,t[2]=i*l,t[3]=o*l,t[4]=u,t[5]=s,t}function d(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],u=e[4],s=e[5],_=r[0],l=r[1];return t[0]=n,t[1]=a,t[2]=i,t[3]=o,t[4]=n*_+i*l+u,t[5]=a*_+o*l+s,t}function v(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t[4]=0,t[5]=0,t}function p(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function g(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function E(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function m(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)}function M(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t}function R(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t}function y(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t}function b(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t}function T(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function O(t,e){var r=t[0],n=t[1],a=t[2],i=t[3],o=t[4],u=t[5],s=e[0],_=e[1],l=e[2],c=e[3],h=e[4],f=e[5];return Math.abs(r-s)<=A.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(n-_)<=A.EPSILON*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(a-l)<=A.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(i-c)<=A.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(o-h)<=A.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(u-f)<=A.EPSILON*Math.max(1,Math.abs(u),Math.abs(f))}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=n,e.clone=a,e.copy=i,e.identity=o,e.fromValues=u,e.set=s,e.invert=_,e.determinant=l,e.multiply=c,e.rotate=h,e.scale=f,e.translate=d,e.fromRotation=v,e.fromScaling=p,e.fromTranslation=g,e.str=E,e.frob=m,e.add=M,e.subtract=R,e.multiplyScalar=y,e.multiplyScalarAndAdd=b,e.exactEquals=T,e.equals=O;var P=r(56),A=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(P);e.mul=c,e.sub=R},451:function(t,e,r){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function a(){var t=new Y.ARRAY_TYPE(8);return Y.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function i(t){var e=new Y.ARRAY_TYPE(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function o(t,e,r,n,a,i,o,u){var s=new Y.ARRAY_TYPE(8);return s[0]=t,s[1]=e,s[2]=r,s[3]=n,s[4]=a,s[5]=i,s[6]=o,s[7]=u,s}function u(t,e,r,n,a,i,o){var u=new Y.ARRAY_TYPE(8);u[0]=t,u[1]=e,u[2]=r,u[3]=n;var s=.5*a,_=.5*i,l=.5*o;return u[4]=s*n+_*r-l*e,u[5]=_*n+l*t-s*r,u[6]=l*n+s*e-_*t,u[7]=-s*t-_*e-l*r,u}function s(t,e,r){var n=.5*r[0],a=.5*r[1],i=.5*r[2],o=e[0],u=e[1],s=e[2],_=e[3];return t[0]=o,t[1]=u,t[2]=s,t[3]=_,t[4]=n*_+a*s-i*u,t[5]=a*_+i*o-n*s,t[6]=i*_+n*u-a*o,t[7]=-n*o-a*u-i*s,t}function _(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t}function l(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function c(t,e){var r=N.create();H.getRotation(r,e);var n=new Y.ARRAY_TYPE(3);return H.getTranslation(n,e),s(t,r,n),t}function h(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function f(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function d(t,e,r,n,a,i,o,u,s){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t[4]=i,t[5]=o,t[6]=u,t[7]=s,t}function v(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}function p(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function g(t,e){var r=e[4],n=e[5],a=e[6],i=e[7],o=-e[0],u=-e[1],s=-e[2],_=e[3];return t[0]=2*(r*_+i*o+n*s-a*u),t[1]=2*(n*_+i*u+a*o-r*s),t[2]=2*(a*_+i*s+r*u-n*o),t}function E(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],u=.5*r[0],s=.5*r[1],_=.5*r[2],l=e[4],c=e[5],h=e[6],f=e[7];return t[0]=n,t[1]=a,t[2]=i,t[3]=o,t[4]=o*u+a*_-i*s+l,t[5]=o*s+i*u-n*_+c,t[6]=o*_+n*s-a*u+h,t[7]=-n*u-a*s-i*_+f,t}function m(t,e,r){var n=-e[0],a=-e[1],i=-e[2],o=e[3],u=e[4],s=e[5],_=e[6],l=e[7],c=u*o+l*n+s*i-_*a,h=s*o+l*a+_*n-u*i,f=_*o+l*i+u*a-s*n,d=l*o-u*n-s*a-_*i;return N.rotateX(t,e,r),n=t[0],a=t[1],i=t[2],o=t[3],t[4]=c*o+d*n+h*i-f*a,t[5]=h*o+d*a+f*n-c*i,t[6]=f*o+d*i+c*a-h*n,t[7]=d*o-c*n-h*a-f*i,t}function M(t,e,r){var n=-e[0],a=-e[1],i=-e[2],o=e[3],u=e[4],s=e[5],_=e[6],l=e[7],c=u*o+l*n+s*i-_*a,h=s*o+l*a+_*n-u*i,f=_*o+l*i+u*a-s*n,d=l*o-u*n-s*a-_*i;return N.rotateY(t,e,r),n=t[0],a=t[1],i=t[2],o=t[3],t[4]=c*o+d*n+h*i-f*a,t[5]=h*o+d*a+f*n-c*i,t[6]=f*o+d*i+c*a-h*n,t[7]=d*o-c*n-h*a-f*i,t}function R(t,e,r){var n=-e[0],a=-e[1],i=-e[2],o=e[3],u=e[4],s=e[5],_=e[6],l=e[7],c=u*o+l*n+s*i-_*a,h=s*o+l*a+_*n-u*i,f=_*o+l*i+u*a-s*n,d=l*o-u*n-s*a-_*i;return N.rotateZ(t,e,r),n=t[0],a=t[1],i=t[2],o=t[3],t[4]=c*o+d*n+h*i-f*a,t[5]=h*o+d*a+f*n-c*i,t[6]=f*o+d*i+c*a-h*n,t[7]=d*o-c*n-h*a-f*i,t}function y(t,e,r){var n=r[0],a=r[1],i=r[2],o=r[3],u=e[0],s=e[1],_=e[2],l=e[3];return t[0]=u*o+l*n+s*i-_*a,t[1]=s*o+l*a+_*n-u*i,t[2]=_*o+l*i+u*a-s*n,t[3]=l*o-u*n-s*a-_*i,u=e[4],s=e[5],_=e[6],l=e[7],t[4]=u*o+l*n+s*i-_*a,t[5]=s*o+l*a+_*n-u*i,t[6]=_*o+l*i+u*a-s*n,t[7]=l*o-u*n-s*a-_*i,t}function b(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],u=r[0],s=r[1],_=r[2],l=r[3];return t[0]=n*l+o*u+a*_-i*s,t[1]=a*l+o*s+i*u-n*_,t[2]=i*l+o*_+n*s-a*u,t[3]=o*l-n*u-a*s-i*_,u=r[4],s=r[5],_=r[6],l=r[7],t[4]=n*l+o*u+a*_-i*s,t[5]=a*l+o*s+i*u-n*_,t[6]=i*l+o*_+n*s-a*u,t[7]=o*l-n*u-a*s-i*_,t}function T(t,e,r,n){if(Math.abs(n)<Y.EPSILON)return h(t,e);var a=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);n*=.5;var i=Math.sin(n),o=i*r[0]/a,u=i*r[1]/a,s=i*r[2]/a,_=Math.cos(n),l=e[0],c=e[1],f=e[2],d=e[3];t[0]=l*_+d*o+c*s-f*u,t[1]=c*_+d*u+f*o-l*s,t[2]=f*_+d*s+l*u-c*o,t[3]=d*_-l*o-c*u-f*s;var v=e[4],p=e[5],g=e[6],E=e[7];return t[4]=v*_+E*o+p*s-g*u,t[5]=p*_+E*u+g*o-v*s,t[6]=g*_+E*s+v*u-p*o,t[7]=E*_-v*o-p*u-g*s,t}function O(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t}function P(t,e,r){var n=e[0],a=e[1],i=e[2],o=e[3],u=r[4],s=r[5],_=r[6],l=r[7],c=e[4],h=e[5],f=e[6],d=e[7],v=r[0],p=r[1],g=r[2],E=r[3];return t[0]=n*E+o*v+a*g-i*p,t[1]=a*E+o*p+i*v-n*g,t[2]=i*E+o*g+n*p-a*v,t[3]=o*E-n*v-a*p-i*g,t[4]=n*l+o*u+a*_-i*s+c*E+d*v+h*g-f*p,t[5]=a*l+o*s+i*u-n*_+h*E+d*p+f*v-c*g,t[6]=i*l+o*_+n*s-a*u+f*E+d*g+c*p-h*v,t[7]=o*l-n*u-a*s-i*_+d*E-c*v-h*p-f*g,t}function A(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t}function w(t,e,r,n){var a=1-n;return X(e,r)<0&&(n=-n),t[0]=e[0]*a+r[0]*n,t[1]=e[1]*a+r[1]*n,t[2]=e[2]*a+r[2]*n,t[3]=e[3]*a+r[3]*n,t[4]=e[4]*a+r[4]*n,t[5]=e[5]*a+r[5]*n,t[6]=e[6]*a+r[6]*n,t[7]=e[7]*a+r[7]*n,t}function S(t,e){var r=B(e);return t[0]=-e[0]/r,t[1]=-e[1]/r,t[2]=-e[2]/r,t[3]=e[3]/r,t[4]=-e[4]/r,t[5]=-e[5]/r,t[6]=-e[6]/r,t[7]=e[7]/r,t}function U(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}function x(t,e){var r=B(e);if(r>0){r=Math.sqrt(r);var n=e[0]/r,a=e[1]/r,i=e[2]/r,o=e[3]/r,u=e[4],s=e[5],_=e[6],l=e[7],c=n*u+a*s+i*_+o*l;t[0]=n,t[1]=a,t[2]=i,t[3]=o,t[4]=(u-n*c)/r,t[5]=(s-a*c)/r,t[6]=(_-i*c)/r,t[7]=(l-o*c)/r}return t}function L(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function D(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function I(t,e){var r=t[0],n=t[1],a=t[2],i=t[3],o=t[4],u=t[5],s=t[6],_=t[7],l=e[0],c=e[1],h=e[2],f=e[3],d=e[4],v=e[5],p=e[6],g=e[7];return Math.abs(r-l)<=Y.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(n-c)<=Y.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(a-h)<=Y.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(i-f)<=Y.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(o-d)<=Y.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(u-v)<=Y.EPSILON*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(s-p)<=Y.EPSILON*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(_-g)<=Y.EPSILON*Math.max(1,Math.abs(_),Math.abs(g))}Object.defineProperty(e,"__esModule",{value:!0}),e.sqrLen=e.squaredLength=e.len=e.length=e.dot=e.mul=e.setReal=e.getReal=void 0,e.create=a,e.clone=i,e.fromValues=o,e.fromRotationTranslationValues=u,e.fromRotationTranslation=s,e.fromTranslation=_,e.fromRotation=l,e.fromMat4=c,e.copy=h,e.identity=f,e.set=d,e.getDual=v,e.setDual=p,e.getTranslation=g,e.translate=E,e.rotateX=m,e.rotateY=M,e.rotateZ=R,e.rotateByQuatAppend=y,e.rotateByQuatPrepend=b,e.rotateAroundAxis=T,e.add=O,e.multiply=P,e.scale=A,e.lerp=w,e.invert=S,e.conjugate=U,e.normalize=x,e.str=L,e.exactEquals=D,e.equals=I;var k=r(56),Y=n(k),j=r(348),N=n(j),G=r(347),H=n(G),X=(e.getReal=N.copy,e.setReal=N.copy,e.mul=P,e.dot=N.dot),F=e.length=N.length,B=(e.len=F,e.squaredLength=N.squaredLength);e.sqrLen=B},452:function(t,e,r){"use strict";function n(){var t=new H.ARRAY_TYPE(2);return H.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t}function a(t){var e=new H.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e}function i(t,e){var r=new H.ARRAY_TYPE(2);return r[0]=t,r[1]=e,r}function o(t,e){return t[0]=e[0],t[1]=e[1],t}function u(t,e,r){return t[0]=e,t[1]=r,t}function s(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function _(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function l(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}function c(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}function h(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function f(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function d(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t}function v(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t}function p(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function g(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t}function E(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t}function m(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(r*r+n*n)}function M(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n}function R(t){var e=t[0],r=t[1];return Math.sqrt(e*e+r*r)}function y(t){var e=t[0],r=t[1];return e*e+r*r}function b(t,e){return t[0]=-e[0],t[1]=-e[1],t}function T(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function O(t,e){var r=e[0],n=e[1],a=r*r+n*n;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a),t}function P(t,e){return t[0]*e[0]+t[1]*e[1]}function A(t,e,r){var n=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=n,t}function w(t,e,r,n){var a=e[0],i=e[1];return t[0]=a+n*(r[0]-a),t[1]=i+n*(r[1]-i),t}function S(t,e){e=e||1;var r=2*H.RANDOM()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t}function U(t,e,r){var n=e[0],a=e[1];return t[0]=r[0]*n+r[2]*a,t[1]=r[1]*n+r[3]*a,t}function x(t,e,r){var n=e[0],a=e[1];return t[0]=r[0]*n+r[2]*a+r[4],t[1]=r[1]*n+r[3]*a+r[5],t}function L(t,e,r){var n=e[0],a=e[1];return t[0]=r[0]*n+r[3]*a+r[6],t[1]=r[1]*n+r[4]*a+r[7],t}function D(t,e,r){var n=e[0],a=e[1];return t[0]=r[0]*n+r[4]*a+r[12],t[1]=r[1]*n+r[5]*a+r[13],t}function I(t,e,r,n){var a=e[0]-r[0],i=e[1]-r[1],o=Math.sin(n),u=Math.cos(n);return t[0]=a*u-i*o+r[0],t[1]=a*o+i*u+r[1],t}function k(t,e){var r=t[0],n=t[1],a=e[0],i=e[1],o=r*r+n*n;o>0&&(o=1/Math.sqrt(o));var u=a*a+i*i;u>0&&(u=1/Math.sqrt(u));var s=(r*a+n*i)*o*u;return s>1?0:s<-1?Math.PI:Math.acos(s)}function Y(t){return"vec2("+t[0]+", "+t[1]+")"}function j(t,e){return t[0]===e[0]&&t[1]===e[1]}function N(t,e){var r=t[0],n=t[1],a=e[0],i=e[1];return Math.abs(r-a)<=H.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-i)<=H.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.sqrDist=e.dist=e.div=e.mul=e.sub=e.len=void 0,e.create=n,e.clone=a,e.fromValues=i,e.copy=o,e.set=u,e.add=s,e.subtract=_,e.multiply=l,e.divide=c,e.ceil=h,e.floor=f,e.min=d,e.max=v,e.round=p,e.scale=g,e.scaleAndAdd=E,e.distance=m,e.squaredDistance=M,e.length=R,e.squaredLength=y,e.negate=b,e.inverse=T,e.normalize=O,e.dot=P,e.cross=A,e.lerp=w,e.random=S,e.transformMat2=U,e.transformMat2d=x,e.transformMat3=L,e.transformMat4=D,e.rotate=I,e.angle=k,e.str=Y,e.exactEquals=j,e.equals=N;var G=r(56),H=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(G);e.len=R,e.sub=_,e.mul=l,e.div=c,e.dist=m,e.sqrDist=M,e.sqrLen=y,e.forEach=function(){var t=n();return function(e,r,n,a,i,o){var u=void 0,s=void 0;for(r||(r=2),n||(n=0),s=a?Math.min(a*r+n,e.length):e.length,u=n;u<s;u+=r)t[0]=e[u],t[1]=e[u+1],i(t,t,o),e[u]=t[0],e[u+1]=t[1];return e}}()},453:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.DEBUG_UNIFORM_NOT_FOUND=!0},454:function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.TextureDescription=e.Texture=e.TEXTURE_MODE_SPHERE_MAP=e.TEXTURE_MODE_MASK=e.TEXTURE_MODE_NORMAL=void 0;var o=function t(e,r,n){null===e&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,r);if(void 0===a){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,r,n)}if("value"in a)return a.value;var o=a.get;if(void 0!==o)return o.call(n)},u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=r(61),_=e.TEXTURE_MODE_NORMAL=0,l=(e.TEXTURE_MODE_MASK=1,e.TEXTURE_MODE_SPHERE_MAP=2,e.Texture=function(t){function e(t){n(this,e);var r=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"",""));return r._index=t,r._enabled=!1,r._gl_data=null,r.image=null,r._mode=_,r._weight=1,r._clear(),r}return i(e,t),u(e,[{key:"_clear",value:function(){this.image=new Image,this.image.crossOrigin="Anonymous",this._gl_data=null,this.image_loaded=!1,this._enabled=!1}},{key:"create_gl_internal",value:function(t,e){this._gl_data=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this._gl_data),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.image),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.bindTexture(t.TEXTURE_2D,null)}},{key:"destroy_gl_internal",value:function(t){this._gl_data&&t.deleteTexture(this._gl_data),this._clear()}},{key:"has_required_data",value:function(t){return this.image_loaded}},{key:"load_data",value:function(t,e){function r(){n.image_loaded=!0,e()}var n=this;t.url&&(this.image.onload=r,this.image.src=t.url),void 0!=t.enabled?this._enabled=t.enabled:t.url&&(this._enabled=!0),void 0!==t.mode&&(this._mode=t.mode),void 0!==t.weight&&(this._weight=t.weight)}},{key:"is_loaded",value:function(){return null!==this._gl_data}},{key:"index",get:function(){return this._index}},{key:"enabled",get:function(){return this._enabled}},{key:"gl_data",get:function(){return this._gl_data}},{key:"mode",get:function(){return this._mode}},{key:"weight",get:function(){return this._weight}}]),e}(s.GLObject));e.TextureDescription=function(t){function e(){n(this,e);var t=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"",""));return t._textures=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],t}return i(e,t),u(e,[{key:"create_gl",value:function(t,r){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"create_gl",this).call(this,t,r),this.textures.forEach(function(e){e&&e.create_gl(t,r)})}},{key:"has_required_data",value:function(t){return!0}},{key:"destroy_gl",value:function(t){this.textures.forEach(function(e){e&&e.destroyGl(t)})}},{key:"load_data",value:function(t,e){this._set_texture(t.texture_0,0,e),this._set_texture(t.texture_1,1,e),this._set_texture(t.texture_2,2,e),this._set_texture(t.texture_3,3,e),this._set_texture(t.texture_4,4,e),this._set_texture(t.texture_5,5,e),this._set_texture(t.texture_6,6,e),this._set_texture(t.texture_7,7,e),this._set_texture(t.texture_8,8,e),this._set_texture(t.texture_9,9,e),this._set_texture(t.texture_10,10,e),this._set_texture(t.texture_11,11,e),this._set_texture(t.texture_12,12,e),this._set_texture(t.texture_13,13,e),this._set_texture(t.texture_14,14,e),this._set_texture(t.texture_15,15,e)}},{key:"override_with",value:function(t){var e=this;t.textures.forEach(function(t,r){t&&(e._textures[r]=t)})}},{key:"_set_texture",value:function(t,e,r){t&&(this._textures[e]=new l(e),this._textures[e].load_data(t,r))}},{key:"textures",get:function(){return this._textures.filter(function(){return!0})}}]),e}(s.GLObject)},56:function(t,e,r){"use strict";function n(t){e.ARRAY_TYPE=u=t}function a(t){return t*s}function i(t,e){return Math.abs(t-e)<=o*Math.max(1,Math.abs(t),Math.abs(e))}Object.defineProperty(e,"__esModule",{value:!0}),e.setMatrixArrayType=n,e.toRadian=a,e.equals=i;var o=e.EPSILON=1e-6,u=e.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,s=(e.RANDOM=Math.random,Math.PI/180)},61:function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();e.GLObject=function(){function t(e,r){n(this,t),this.id=e,this.loaded=!1,this.typeString=r}return a(t,[{key:"get_id",value:function(){return this.id}},{key:"is_loaded",value:function(){return this.loaded}},{key:"create_gl",value:function(t,e){this.loaded||this.has_required_data(e)&&(this.loaded=!0,this.create_gl_internal(t,e))}},{key:"destroy_gl",value:function(t){this.loaded=!1,this.destroy_gl_internal(t)}},{key:"create_gl_internal",value:function(t,e){return null}},{key:"destroy_gl_internal",value:function(t){}},{key:"bind",value:function(t){}},{key:"is_type",value:function(t){return this.typeString===t}},{key:"load_data",value:function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3]}},{key:"has_required_data",value:function(t){return!1}}]),t}(),e.GLObjectCollection=function(){function t(){n(this,t),this._array=[]}return a(t,[{key:"push",value:function(t){this.get_by_id(t.get_id())||this._array.push(t)}},{key:"pop",value:function(t){var e=this.get_by_id(t);if(e){var r=this._array.indexOf(e),n=this._array[r];return this._array.splice(r,1),n}return null}},{key:"_replace",value:function(t,e){var r=this._array.indexOf(t),n=this._array[r];return this._array.splice(r,1,e),n}},{key:"get_by_id",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this._array.filter(function(r){return r.get_id()===t&&(!e||r.is_type(e))});return r.length>0?r[0]:null}},{key:"containsId",value:function(t){return!!this.get_by_id(t)}},{key:"forEach",value:function(t){this._array.forEach(t)}},{key:"create_gl",value:function(t,e){this.forEach(function(r){return r.create_gl(t,e)})}},{key:"destroy_gl",value:function(t){this.forEach(function(e){return e.destroyGl(t)})}},{key:"all_loaded",value:function(){return 0==this._array.filter(function(t){return!t.is_loaded()}).length}},{key:"has_required_data",value:function(t){return 0==this._array.filter(function(e){return!e.has_required_data(t)}).length}},{key:"consume_id",value:function(t,e){var r=this.get_by_id(t);null!==r&&e(r)}}]),t}()}});
